<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
    
    <entry>
      <title><![CDATA[逆变协变]]></title>
      <url>http://bytes1001.github.io/2016/05/23/%E9%80%86%E5%8F%98%E5%8D%8F%E5%8F%98/</url>
      <content type="html"><![CDATA[<p><strong>&#x53EF;&#x53D8;&#x6027;&#x7684;&#x7C7B;&#x578B;&#xFF1A;&#x534F;&#x53D8;&#x6027;&#x548C;&#x9006;&#x53D8;&#x6027;</strong></p>
<p>&#x53EF;&#x53D8;&#x6027;&#x662F;&#x4EE5;&#x4E00;&#x79CD;&#x7C7B;&#x578B;&#x5B89;&#x5168;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x5C06;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x5F53;&#x505A;&#x53E6;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x6765;&#x4F7F;&#x7528;&#x3002;&#x5982;&#x679C;&#x4E0D;&#x80FD;&#x5C06;&#x4E00;&#x4E2A;&#x7C7B;&#x578B;&#x66FF;&#x6362;&#x4E3A;&#x53E6;&#x4E00;&#x4E2A;&#x7C7B;&#x578B;&#xFF0C;&#x90A3;&#x4E48;&#x8FD9;&#x4E2A;&#x7C7B;&#x578B;&#x5C31;&#x79F0;&#x4E4B;&#x4E3A;&#xFF1A;&#x4E0D;&#x53D8;&#x91CF;&#x3002;&#x534F;&#x53D8;&#x548C;&#x9006;&#x53D8;&#x662F;&#x4E24;&#x4E2A;&#x76F8;&#x4E92;&#x5BF9;&#x7ACB;&#x7684;&#x6982;&#x5FF5;&#xFF1A;</p>
<ul>
<li>&#x5982;&#x679C;&#x67D0;&#x4E2A;&#x8FD4;&#x56DE;&#x7684;&#x7C7B;&#x578B;&#x53EF;&#x4EE5;&#x7531;&#x5176;&#x6D3E;&#x751F;&#x7C7B;&#x578B;&#x66FF;&#x6362;&#xFF0C;&#x90A3;&#x4E48;&#x8FD9;&#x4E2A;&#x7C7B;&#x578B;&#x5C31;&#x662F;&#x652F;&#x6301;&#x534F;&#x53D8;&#x7684;</li>
<li>&#x5982;&#x679C;&#x67D0;&#x4E2A;&#x53C2;&#x6570;&#x7C7B;&#x578B;&#x53EF;&#x4EE5;&#x7531;&#x5176;&#x57FA;&#x7C7B;&#x66FF;&#x6362;&#xFF0C;&#x90A3;&#x4E48;&#x8FD9;&#x4E2A;&#x7C7B;&#x578B;&#x5C31;&#x662F;&#x652F;&#x6301;&#x9006;&#x53D8;&#x7684;&#x3002;</li>
</ul>
<p><strong>C# 4.0&#x5BF9;&#x6CDB;&#x578B;&#x53EF;&#x53D8;&#x6027;&#x7684;&#x652F;&#x6301;</strong><br>    &#x5728;C# 4.0&#x4E4B;&#x524D;&#xFF0C;&#x6240;&#x6709;&#x7684;&#x6CDB;&#x578B;&#x7C7B;&#x578B;&#x90FD;&#x662F;&#x4E0D;&#x53D8;&#x91CF;&#x2014;&#x2014;&#x5373;&#x4E0D;&#x652F;&#x6301;&#x5C06;&#x4E00;&#x4E2A;&#x6CDB;&#x578B;&#x7C7B;&#x578B;&#x66FF;&#x6362;&#x4E3A;&#x53E6;&#x4E00;&#x4E2A;&#x6CDB;&#x578B;&#x7C7B;&#x578B;&#xFF0C;&#x5373;&#x4F7F;&#x5B83;&#x4EEC;&#x4E4B;&#x95F4;&#x62E5;&#x6709;&#x7EE7;&#x627F;&#x5173;&#x7CFB;&#xFF0C;&#x7B80;&#x800C;&#x8A00;&#x4E4B;&#xFF0C;&#x5728;C# 4.0&#x4E4B;&#x524D;&#x7684;&#x6CDB;&#x578B;&#x90FD;&#x662F;&#x4E0D;&#x652F;&#x6301;&#x534F;&#x53D8;&#x548C;&#x9006;&#x53D8;&#x7684;&#x3002;C# 4.0&#x901A;&#x8FC7;&#x4E24;&#x4E2A;&#x5173;&#x952E;&#x5B57;&#xFF1A;out&#x548C;in&#x6765;&#x5206;&#x522B;&#x652F;&#x6301;&#x4EE5;&#x534F;&#x53D8;&#x548C;&#x9006;&#x53D8;&#x7684;&#x65B9;&#x5F0F;&#x4F7F;&#x7528;&#x6CDB;&#x578B;&#x3002;&#x6211;&#x4EEC;&#x6765;&#x770B;&#x4E00;&#x6BB5;&#x5229;&#x7528;&#x4E86;&#x534F;&#x53D8;&#x7C7B;&#x578B;&#x53C2;&#x6570;&#x7684;&#x4EE3;&#x7801;&#xFF1A;</p>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BaseClass</span></span><br><span class="line"></span>{</span><br><span class="line">}</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DerivedClass</span> : <span class="title">BaseClass</span></span><br><span class="line"></span>{</span><br><span class="line">}</span><br><span class="line"><span class="comment">//&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x5229;&#x7528;&#x534F;&#x53D8;&#x7C7B;&#x578B;&#x53C2;&#x6570;&#xFF0C;&#x53EF;&#x4EE5;&#x6267;&#x884C;&#x7C7B;&#x4F3C;&#x4E8E;&#x666E;&#x901A;&#x7684;&#x591A;&#x6001;&#x6027;&#x7684;&#x5206;&#x914D;&#xFF1A;</span></span><br><span class="line">IEnumerable&lt;DerivedClass&gt; d = <span class="keyword">new</span> List&lt;DerivedClass&gt;();</span><br><span class="line">IEnumerable&lt;BaseClass&gt; b = d;</span><br></pre></td></tr></table></figure>
<p>&#x5728;&#x4E0A;&#x9762;&#x7684;&#x5B9E;&#x4F8B;&#x4E2D;&#xFF0C;&#x5728;C# 4.0&#x4E4B;&#x524D;&#x662F;&#x4E0D;&#x80FD;&#x6B63;&#x5E38;&#x7F16;&#x8BD1;&#x7684;&#xFF0C;&#x9664;&#x4E86;&#x5BF9;&#x8D4B;&#x503C;&#x7ED9;&#x57FA;&#x7C7B;&#x96C6;&#x5408;&#x65F6;&#x5C06;&#x5B50;&#x7C7B;&#x96C6;&#x5408;&#x505A;&#x4E00;&#x4E2A;&#x5F3A;&#x5236;&#x8F6C;&#x6362;&#xFF0C;&#x4F46;&#x662F;&#x5728;&#x8FD0;&#x884C;&#x65F6;&#x4ECD;&#x7136;&#x4F1A;&#x629B;&#x51FA;&#x4E00;&#x4E2A;&#x7C7B;&#x578B;&#x8F6C;&#x6362;&#x7684;&#x5F02;&#x5E38;&#x3002;<br>&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x518D;&#x770B;&#x4E00;&#x4E2A;&#x5173;&#x4E8E;&#x9006;&#x53D8;&#x7684;&#x5B9E;&#x4F8B;&#x4EE3;&#x7801;&#xFF1A;<br><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Action</span>&lt;BaseClass&gt; b = (<span class="type">target</span>) =&gt; { Console.WriteLine(<span class="type">target</span>.GetType().<span class="keyword">Name</span>); };</span><br><span class="line"><span class="keyword">Action</span>&lt;DerivedClass&gt; d = b;</span><br><span class="line">d(new DerivedClass());</span><br></pre></td></tr></table></figure></p>
<p>&#x5728;&#x4E0A;&#x9762;&#x7684;&#x793A;&#x4F8B;&#x4E2D;&#x6211;&#x4EEC; Action<baseclass> &#x7C7B;&#x578B;&#x7684;&#x59D4;&#x6258;&#x5206;&#x914D;&#x7ED9;&#x7C7B;&#x578B; Action<derivedclass> &#x7684;&#x53D8;&#x91CF;&#xFF0C;&#x6839;&#x636E;&#x9006;&#x53D8;&#x7684;&#x5B9A;&#x4E49;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x77E5;&#x9053; Action<t> &#x7C7B;&#x578B;&#x662F;&#x652F;&#x6301;&#x9006;&#x53D8;&#x7684;&#x3002;<br>&#x4E3A;&#x4EC0;&#x4E48;IEnumerable<t> &#x548C; Action<t> &#x53EF;&#x4EE5;&#x5206;&#x522B;&#x652F;&#x6301;&#x7C7B;&#x578B;&#x7684;&#x9006;&#x53D8;&#x548C;&#x534F;&#x53D8;&#x5462;&#xFF1F;&#x6211;&#x4EEC;&#x67E5;&#x770B;&#x8FD9;&#x4E24;&#x4E2A;&#x7C7B;&#x578B;&#x5728; .NET &#x4E2D;&#x7684;&#x5B9A;&#x4E49;&#xFF1A;<br><figure class="highlight d"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//IEnumerable&lt;T&gt; &#x63A5;&#x53E3;&#x7684;&#x5B9A;&#x4E49;(&#x652F;&#x6301;&#x534F;&#x53D8;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> IEnumerable&lt;<span class="keyword">out</span> T&gt; : IEnumerable</span><br><span class="line"><span class="comment">//Action&lt;T&gt; &#x59D4;&#x6258;&#x7684;&#x5B9A;&#x4E49;(&#x652F;&#x6301;&#x9006;&#x53D8;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="built_in">delegate</span> <span class="keyword">void</span> Action&lt;<span class="keyword">in</span> T&gt;(T obj);</span><br></pre></td></tr></table></figure></t></t></t></derivedclass></baseclass></p>
<p>&#x4E3A;&#x4E86;&#x4FDD;&#x8BC1;&#x7C7B;&#x578B;&#x7684;&#x5B89;&#x5168;&#xFF0C;C#&#x7F16;&#x8BD1;&#x5668;&#x5BF9;&#x4F7F;&#x7528;&#x4E86; out &#x548C; in &#x5173;&#x952E;&#x5B57;&#x7684;&#x6CDB;&#x578B;&#x53C2;&#x6570;&#x6DFB;&#x52A0;&#x4E86;&#x4E00;&#x4E9B;&#x9650;&#x5236;&#xFF1A;<br>&#x652F;&#x6301;&#x534F;&#x53D8;(out)&#x7684;&#x7C7B;&#x578B;&#x53C2;&#x6570;&#x53EA;&#x80FD;&#x7528;&#x5728;&#x8F93;&#x51FA;&#x4F4D;&#x7F6E;&#xFF1A;&#x51FD;&#x6570;&#x8FD4;&#x56DE;&#x503C;&#x3001;&#x5C5E;&#x6027;&#x7684;get&#x8BBF;&#x95EE;&#x5668;&#x4EE5;&#x53CA;&#x59D4;&#x6258;&#x53C2;&#x6570;&#x7684;&#x67D0;&#x4E9B;&#x4F4D;&#x7F6E;<br>&#x652F;&#x6301;&#x9006;&#x53D8;(in)&#x7684;&#x7C7B;&#x578B;&#x53C2;&#x6570;&#x53EA;&#x80FD;&#x7528;&#x5728;&#x8F93;&#x5165;&#x4F4D;&#x7F6E;&#xFF1A;&#x65B9;&#x6CD5;&#x53C2;&#x6570;&#x6216;&#x59D4;&#x6258;&#x53C2;&#x6570;&#x7684;&#x67D0;&#x4E9B;&#x4F4D;&#x7F6E;&#x4E2D;&#x51FA;&#x73B0;&#x3002;</p>
<p><strong>C#&#x4E2D;&#x6CDB;&#x578B;&#x53EF;&#x53D8;&#x6027;&#x7684;&#x9650;&#x5236;</strong></p>
<p><font color="darkred">1.&#x4E0D;&#x652F;&#x6301;&#x7C7B;&#x7684;&#x7C7B;&#x578B;&#x53C2;&#x6570;&#x7684;&#x53EF;&#x53D8;&#x6027;</font><br>    &#x53EA;&#x6709;&#x63A5;&#x53E3;&#x548C;&#x59D4;&#x6258;&#x53EF;&#x4EE5;&#x62E5;&#x6709;&#x53EF;&#x53D8;&#x7684;&#x7C7B;&#x578B;&#x53C2;&#x6570;&#x3002;in &#x548C; out &#x4FEE;&#x9970;&#x7B26;&#x53EA;&#x80FD;&#x7528;&#x6765;&#x4FEE;&#x9970;&#x6CDB;&#x578B;&#x63A5;&#x53E3;&#x548C;&#x6CDB;&#x578B;&#x59D4;&#x6258;&#x3002;</p>
<p><font color="darkred">2.&#x53EF;&#x53D8;&#x6027;&#x53EA;&#x652F;&#x6301;&#x5F15;&#x7528;&#x8F6C;&#x6362;</font><br>    &#x53EF;&#x53D8;&#x6027;&#x53EA;&#x80FD;&#x7528;&#x4E8E;&#x5F15;&#x7528;&#x7C7B;&#x578B;&#xFF0C;&#x7981;&#x6B62;&#x4EFB;&#x4F55;&#x503C;&#x7C7B;&#x578B;&#x548C;&#x7528;&#x6237;&#x5B9A;&#x4E49;&#x7684;&#x8F6C;&#x6362;&#xFF0C;&#x5982;&#x4E0B;&#x9762;&#x7684;&#x8F6C;&#x6362;&#x662F;&#x65E0;&#x6548;&#x7684;&#xFF1A;<br>    &#x5C06; IEnumerable<int> &#x8F6C;&#x6362;&#x4E3A; IEnumerable<object> &#x2014;&#x2014;&#x88C5;&#x7BB1;&#x8F6C;&#x6362;<br>    &#x5C06; IEnumerable<short> &#x8F6C;&#x6362;&#x4E3A; IEnumerable<int> &#x2014;&#x2014;&#x503C;&#x7C7B;&#x578B;&#x8F6C;&#x6362;<br>    &#x5C06; IEnumerable<string> &#x8F6C;&#x6362;&#x4E3A; IEnumerable<xname> &#x2014;&#x2014;&#x7528;&#x6237;&#x5B9A;&#x4E49;&#x7684;&#x8F6C;&#x6362;</xname></string></int></short></object></int></p>
<p><font color="darkred">3.&#x7C7B;&#x578B;&#x53C2;&#x6570;&#x4F7F;&#x7528;&#x4E86; out &#x6216;&#x8005; ref &#x5C06;&#x7981;&#x6B62;&#x53EF;&#x53D8;&#x6027;</font><br>&#x5BF9;&#x4E8E;&#x6CDB;&#x578B;&#x7C7B;&#x578B;&#x53C2;&#x6570;&#x6765;&#x8BF4;&#xFF0C;&#x5982;&#x679C;&#x8981;&#x5C06;&#x8BE5;&#x7C7B;&#x578B;&#x7684;&#x5B9E;&#x53C2;&#x4F20;&#x7ED9;&#x4F7F;&#x7528; out &#x6216;&#x8005; ref &#x5173;&#x952E;&#x5B57;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x4FBF;&#x4E0D;&#x5141;&#x8BB8;&#x53EF;&#x53D8;&#x6027;,&#x5982;</p>
<p><code>delegate void someDelegate&lt;in T&gt;(ref T t)//&#x8FD9;&#x6BB5;&#x4EE3;&#x7801;&#x7F16;&#x8BD1;&#x5668;&#x4F1A;&#x62A5;&#x9519;&#x3002;</code></p>
<p><font color="darkred">4.&#x53EF;&#x53D8;&#x6027;&#x5FC5;&#x987B;&#x663E;&#x5F0F;&#x6307;&#x5B9A;</font><br>&#x4ECE;&#x5B9E;&#x73B0;&#x4E0A;&#x6765;&#x8BF4;&#x7F16;&#x8BD1;&#x5668;&#x5B8C;&#x5168;&#x53EF;&#x4EE5;&#x81EA;&#x5DF1;&#x5224;&#x65AD;&#x54EA;&#x4E9B;&#x6CDB;&#x578B;&#x53C2;&#x6570;&#x80FD;&#x591F;&#x9006;&#x53D8;&#x548C;&#x534F;&#x53D8;&#xFF0C;&#x4F46;&#x5B9E;&#x9645;&#x5374;&#x6CA1;&#x6709;&#x8FD9;&#x4E48;&#x505A;&#xFF0C;&#x8FD9;&#x662F;&#x56E0;&#x4E3A;C#&#x7684;&#x5F00;     &#x53D1;&#x56E2;&#x961F;&#x8BA4;&#x4E3A;&#xFF1A;&#x5FC5;&#x987B;&#x7531;&#x5F00;&#x53D1;&#x8005;&#x660E;&#x786E;&#x7684;&#x6307;&#x5B9A;&#x53EF;&#x53D8;&#x6027;&#xFF0C;&#x56E0;&#x4E3A;&#x8FD9;&#x4F1A;&#x4FC3;&#x4F7F;&#x5F00;&#x53D1;&#x8005;&#x8003;&#x8651;&#x4ED6;&#x4EEC;&#x7684;&#x884C;&#x4E3A;&#x5C06;&#x4F1A;&#x5E26;&#x6765;&#x4EC0;&#x4E48;&#x540E;&#x679C;&#xFF0C;&#x4ECE;&#x800C;&#x601D;      &#x8003;&#x4ED6;&#x4EEC;&#x7684;&#x8BBE;&#x8BA1;&#x662F;&#x5426;&#x5408;&#x7406;&#x3002;</p>
<p><font color="darkred">5.&#x6CE8;&#x610F;&#x7834;&#x574F;&#x6027;&#x4FEE;&#x6539;</font><br>&#x5728;&#x4FEE;&#x6539;&#x5DF2;&#x6709;&#x4EE3;&#x7801;&#x63A5;&#x53E3;&#x7684;&#x53EF;&#x53D8;&#x6027;&#x65F6;&#xFF0C;&#x4F1A;&#x6709;&#x7834;&#x574F;&#x5F53;&#x524D;&#x4EE3;&#x7801;&#x7684;&#x98CE;&#x9669;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x4F9D;&#x8D56;&#x4E8E;&#x4E0D;&#x5141;&#x8BB8;&#x53EF;&#x53D8;&#x6027;&#x7684;is&#x6216;as&#x64CD;&#x4F5C;&#x7B26;       &#x7684;&#x7ED3;&#x679C;&#xFF0C;&#x8FD0;&#x884C;&#x5728;.NET 4&#x65F6;&#xFF0C;&#x4EE3;&#x7801;&#x7684;&#x884C;&#x4E3A;&#x5C06;&#x6709;&#x6240;&#x4E0D;&#x540C;&#x3002;&#x540C;&#x6837;&#xFF0C;&#x5728;&#x67D0;&#x4E9B;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x56E0;&#x4E3A;&#x6709;&#x4E86;&#x66F4;&#x591A;&#x53EF;&#x7528;&#x7684;&#x9009;&#x9879;&#xFF0C;&#x91CD;&#x8F7D;&#x51B3;&#x7B56;       &#x4E5F;&#x4F1A;&#x9009;&#x62E9;&#x4E0D;&#x540C;&#x7684;&#x65B9;&#x6CD5;&#x3002;&#x6240;&#x4EE5;&#x5728;&#x5BF9;&#x5DF2;&#x6709;&#x4EE3;&#x7801;&#x5F15;&#x5165;&#x53EF;&#x53D8;&#x6027;&#x65F6;&#x8981;&#x505A;&#x597D;&#x8DB3;&#x591F;&#x7684;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x4EE5;&#x53CA;&#x9632;&#x5FA1;&#x63AA;&#x65BD;&#x3002;</p>
<p><font color="darkred">6.&#x591A;&#x64AD;&#x59D4;&#x6258;&#x4E0E;&#x53EF;&#x53D8;&#x6027;&#x4E0D;&#x80FD;&#x6DF7;&#x7528;</font><br>&#x4E0B;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x80FD;&#x591F;&#x901A;&#x8FC7;&#x7F16;&#x8BD1;&#xFF0C;&#x4F46;&#x662F;&#x5728;&#x8FD0;&#x884C;&#x65F6;&#x4F1A;&#x629B;&#x51FA; ArgumentException &#x5F02;&#x5E38;&#xFF1A;<br><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">Func</span>&lt;<span class="title">string</span>&gt; <span class="title">stringFunc</span> = <span class="params">()</span> =&gt; &quot;&quot;;</span></span><br><span class="line"><span class="function"><span class="keyword">Func</span>&lt;<span class="title">object</span>&gt; <span class="title">objectFunc</span> = <span class="params">()</span> =&gt; <span class="title">new</span> <span class="title">object</span><span class="params">()</span>;</span></span><br><span class="line"><span class="function"><span class="keyword">Func</span>&lt;<span class="title">object</span>&gt; <span class="title">combined</span> = <span class="title">objectFunc</span> + <span class="title">stringFunc</span>;</span></span><br></pre></td></tr></table></figure></p>
<p>&#x8FD9;&#x662F;&#x56E0;&#x4E3A;&#x8D1F;&#x8D23;&#x94FE;&#x63A5;&#x591A;&#x4E2A;&#x59D4;&#x6258;&#x7684; Delegate.Combine&#x65B9;&#x6CD5;&#x8981;&#x6C42;&#x53C2;&#x6570;&#x5FC5;&#x987B;&#x4E3A;&#x76F8;&#x540C;&#x7684;&#x7C7B;&#x578B;&#x3002;&#x4E0A;&#x9762;&#x7684;&#x793A;&#x4F8B;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4FEE;&#x6539;&#x6210;&#x5982;&#x4E0B;&#x6B63;&#x786E;&#x7684;&#x4EE3;&#x7801;&#xFF1A;<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Func</span>&lt;string&gt; stringFunc = () =&gt; <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="type">Func</span>&lt;<span class="class"><span class="keyword">object</span><span class="title">&gt;</span> <span class="title">defensiveCopy</span> =</span> <span class="keyword">new</span> <span class="type">Func</span>&lt;<span class="class"><span class="keyword">object</span><span class="title">&gt;</span>(</span>stringFunc);</span><br><span class="line"><span class="type">Func</span>&lt;<span class="class"><span class="keyword">object</span><span class="title">&gt;</span> <span class="title">objectFunc</span> =</span> () =&gt; <span class="keyword">new</span> <span class="class"><span class="keyword">object</span>(</span>);</span><br><span class="line"><span class="type">Func</span>&lt;<span class="class"><span class="keyword">object</span><span class="title">&gt;</span> <span class="title">combined</span> =</span> objectFunc + defensiveCopy;</span><br></pre></td></tr></table></figure></p>
<p><a href="https://msdn.microsoft.com/zh-cn/library/dd799517.aspx" target="_blank" rel="external">MSDN &#x5BF9;&#x9006;&#x53D8;&#x534F;&#x53D8;&#x7684;&#x8BF4;&#x660E;</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[IL解析]]></title>
      <url>http://bytes1001.github.io/2015/09/11/2015-09-11-IL%E8%A7%A3%E6%9E%90/</url>
      <content type="html"><![CDATA[<p>&#x6211;&#x4EEC;&#x77E5;&#x9053;&#x9759;&#x6001;&#x7C7B;&#x578B;&#x7684;&#x8BED;&#x8A00;&#x5982;C#&#x5206;&#x4E24;&#x9636;&#x6BB5;&#x7F16;&#x8BD1;:</p>
<p><img src="http://bytes.oss-cn-hangzhou.aliyuncs.com/blog%2F%E4%B8%A4%E9%98%B6%E6%AE%B5%E7%BC%96%E8%AF%91.png" alt=""></p>
<p><strong>&#x7B2C;&#x4E00;&#x9636;&#x6BB5;</strong>&#xFF0C;&#x7F16;&#x8BD1;&#x65F6;&#x9636;&#x6BB5;&#x3002;&#x7531;CSC.exe &#x8BED;&#x6CD5;&#x7F16;&#x8BD1;&#x5668;&#x8D1F;&#x8D23;&#x628A;C#&#x4EE3;&#x7801;&#x7F16;&#x8BD1;&#x6210;&#x9762;&#x5411;CLR&#x7684;IL&#x4EE3;&#x7801;&#x3002;&#x8FD9;&#x4E00;&#x9636;&#x6BB5;CSC.exe &#x8D1F;&#x8D23;&#x8BED;&#x6CD5;&#x68C0;&#x67E5;&#x3002;&#x68C0;&#x67E5;&#x5F00;&#x53D1;&#x8005;&#x5199;&#x7684;&#x6587;&#x672C;&#x4EE3;&#x7801;&#x662F;&#x5426;&#x9075;&#x5FAA;c#&#x8BED;&#x6CD5;&#x89C4;&#x5219;&#x3002;&#x4F60;&#x603B;&#x4E0D;&#x80FD;&#x7528;java&#x7684;&#x8BED;&#x6CD5;&#x89C4;&#x5219;&#x53BB;&#x8DDF;CLR&#x8BF4;&#xFF0C;hi&#xFF0C;&#x4F60;&#x80FD;&#x4E0D;&#x80FD;&#x5E2E;&#x6211;&#x8BA1;&#x7B97;&#x4E0B;1+1 &#x7B49;&#x4E8E;&#x591A;&#x5C11;&#xFF1F;  </p>
<p><strong>&#x7B2C;&#x4E8C;&#x9636;&#x6BB5;</strong>&#xFF0C;&#x8FD0;&#x884C;&#x65F6;&#x9636;&#x6BB5;&#x3002;&#x7531;CLR&#x7684;JIT&#x7F16;&#x8BD1;&#x5668;&#x628A;IL&#x4EE3;&#x7801;&#x7F16;&#x8BD1;&#x6210;&#x9762;&#x5411;CPU&#x7684;Native code&#xFF08;&#x672C;&#x5730;&#x4EE3;&#x7801;&#xFF09;&#x3002;&#x8FD9;&#x4E00;&#x9636;&#x6BB5;CLR&#x8D1F;&#x8D23;&#x7C7B;&#x578B;&#x68C0;&#x67E5;&#xFF0C;&#x8D44;&#x6E90;&#x5206;&#x914D;&#x7B49;&#x5DE5;&#x4F5C;&#x3002;</p>
<p>.net&#x5E73;&#x53F0;&#x7684;&#x6838;&#x5FC3;&#x662F;CLR,&#x7C7B;&#x6BD4;java&#x91CC;jvm&#x7684;&#x8BF4;&#x6CD5;&#x3002;CLR&#x7684;&#x6838;&#x5FC3;&#x529F;&#x80FD;&#x5305;&#x62EC;&#xFF1A;&#x5185;&#x5B58;&#x7BA1;&#x7406;&#x3001;&#x7A0B;&#x5E8F;&#x96C6;&#x52A0;&#x8F7D;&#x3001;&#x5B89;&#x5168;&#x6027;&#x3001;&#x5F02;&#x5E38;&#x5904;&#x7406;&#x548C;&#x7EBF;&#x7A0B;&#x540C;&#x6B65;&#xFF0C;&#x53EF;&#x7531;&#x9762;&#x5411;CLR&#x7684;&#x6240;&#x6709;&#x8BED;&#x8A00;&#x4F7F;&#x7528;&#x3002;&#x5E76;&#x4FDD;&#x8BC1;&#x5E94;&#x7528;&#x548C;&#x5E95;&#x5C42;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x4E4B;&#x95F4;&#x5FC5;&#x8981;&#x7684;&#x5206;&#x79BB;&#x3002;&#x9762;&#x5411;CLR&#x7684;&#x8BED;&#x8A00;&#x6709;C#,VB.NET,F#,J#,IL&#x7B49;&#xFF0C;&#x8BED;&#x8A00;&#x53EA;&#x662F;&#x4E2A;&#x5DE5;&#x5177;&#xFF0C;&#x8FBE;&#x6210;&#x76EE;&#x7684;&#x7684;&#x4E00;&#x79CD;&#x624B;&#x6BB5;&#x3002;&#x4F18;&#x79C0;&#x7684;&#x5DE5;&#x5320;&#x5584;&#x4E8E;&#x53D1;&#x6325;&#x4E0D;&#x540C;&#x5DE5;&#x5177;&#x7684;&#x4F18;&#x52BF;&#x3002;IL&#x7684;&#x4F18;&#x52BF;&#x5728;&#x4E8E;&#x53EF;&#x4EE5;&#x767E;&#x4E4B;&#x767E;&#x7684;&#x8C03;&#x7528;CLR&#x63D0;&#x4F9B;&#x7684;&#x529F;&#x80FD;&#xFF0C;C#&#x662F;95%&#x5DE6;&#x53F3;&#x3002;&#x867D;&#x7136;C#&#x5728;&#x65E5;&#x5E38;&#x5F00;&#x53D1;&#x4E2D;&#x5DF2;&#x7ECF;&#x5B8C;&#x5168;&#x591F;&#x7528;&#xFF0C;&#x4F46;&#x662F;&#x4E86;&#x89E3;IL&#x8BED;&#x8A00;&#x5BF9;&#x5206;&#x6790;.net&#x4EE3;&#x7801;&#x672C;&#x8D28;&#xFF0C;&#x8FD0;&#x884C;&#x65F6;&#x884C;&#x4E3A;&#x8FD8;&#x662F;&#x6709;&#x5F88;&#x591A;&#x597D;&#x5904;&#x7684;&#x3002;&#x6BD4;&#x5982;&#x8BF4;c#&#x7684;using&#x5173;&#x952E;&#x5B57;&#x5176;&#x5B9E;&#x5C31;&#x662F;try catch finally&#x7684;&#x201C;&#x8BED;&#x6CD5;&#x7CD6;&#x201D;&#xFF0C;lambada&#x8868;&#x8FBE;&#x5F0F;&#x4E0D;&#x8FC7;&#x662F;&#x533F;&#x540D;&#x65B9;&#x6CD5;&#xFF0C;Emit&#x6280;&#x672F;&#x5C31;&#x662F;&#x8FD0;&#x884C;&#x65F6;&#x521B;&#x5EFA;il&#x4EE3;&#x7801;&#x52A8;&#x6001;&#x6267;&#x884C;&#x7B49;&#x7B49;&#x672C;&#x8D28;&#x73B0;&#x8C61;&#x3002;</p>
<p>&#x53E6;&#x5916;&#x719F;&#x6089;IL&#x8BED;&#x6CD5;&#x89C4;&#x5219;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x501F;&#x52A9;ILASM&#x7F16;&#x8BD1;&#x5668;&#x628A;IL&#x6587;&#x672C;&#x4EE3;&#x7801;&#x7F16;&#x8BD1;&#x6210;DLL.&#x4E3A;&#x4E86;&#x8FDB;&#x4E00;&#x6B65;&#x4E86;&#x89E3;&#x5982;&#x4F55;&#x8DDF;CLR&#x8FDB;&#x884C;&#x6C9F;&#x901A;&#xFF0C;&#x6211;&#x4EEC;&#x6709;&#x5FC5;&#x8981;&#x5B66;&#x4E60;&#x4E0B;IL&#x8BED;&#x8A00;&#x3002;&#x56E0;&#x4E3A;CLR&#x53EA;&#x542C;&#x5F97;&#x61C2;IL&#x8BED;&#x8A00;&#x3002;</p>
<p>&#x5148;&#x770B;&#x7740;&#x8FD9;&#x6BB5;C#&#x4EE3;&#x7801;&#x3002;&#x4EE3;&#x7801;&#x7684;&#x610F;&#x56FE;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x5C31;&#x662F;&#x60F3;&#x8BA9;CLR&#x8BA1;&#x7B97;&#x4E0B;1+1&#x7B49;&#x4E8E;&#x591A;&#x5C11;&#x3002;</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> Program</span><br><span class="line">{</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span><span class="params">(<span class="built_in">string</span>[] args)</span></span><br><span class="line">    </span>{</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> j = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        var sum = i + j;</span><br><span class="line"></span><br><span class="line">        Console.WriteLine(<span class="string">&quot;i+j+k=&quot;</span> + sum); </span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<p>&#x63A5;&#x4E0B;&#x6765;&#xFF0C;&#x770B;&#x770B;CLR&#x7684;&#x79D8;&#x4E66;CSC &#x662F;&#x5982;&#x4F55;&#x5E2E;&#x6211;&#x4EEC;&#x7FFB;&#x8BD1;&#x6210;CLR&#x542C;&#x5F97;&#x61C2;&#x7684;IL&#x8BED;&#x8A00;&#x7684;&#x3002;&#xFF08;&#x4F7F;&#x7528;ILDASM &#x5DE5;&#x5177;&#x53CD;&#x7F16;&#x8BD1;&#x4E0B;dll&#x5373;&#x53EF;&#x770B;&#x5230;IL&#x4EE3;&#x7801;&#xFF09;</p>
<figure class="highlight nimrod"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">.<span class="keyword">method</span> private hidebysig <span class="keyword">static</span> <span class="type">void</span>  <span class="type">Main</span>(<span class="type">string</span>[] args) cil managed</span><br><span class="line">{</span><br><span class="line">  .entrypoint  </span><br><span class="line">  // code size  <span class="number">32</span>(<span class="number">0x20</span>) </span><br><span class="line">  .maxstack  <span class="number">2</span> </span><br><span class="line">  .locals init ([<span class="number">0</span>] <span class="type">int32</span> i,</span><br><span class="line">           [<span class="number">1</span>] <span class="type">int32</span> j,</span><br><span class="line">           [<span class="number">2</span>] <span class="type">int32</span> sum)   </span><br><span class="line">  <span class="type">IL_0000</span>:  nop </span><br><span class="line">  <span class="type">IL_0001</span>:  ldc.i4.<span class="number">1</span>  </span><br><span class="line">  <span class="type">IL_0002</span>:  stloc.<span class="number">0</span></span><br><span class="line">  <span class="type">IL_0003</span>:  ldc.i4.<span class="number">1</span></span><br><span class="line">  <span class="type">IL_0004</span>:  stloc.<span class="number">1</span></span><br><span class="line">  <span class="type">IL_0005</span>:  ldloc.<span class="number">0</span></span><br><span class="line">  <span class="type">IL_0006</span>:  ldloc.<span class="number">1</span></span><br><span class="line">  <span class="type">IL_0007</span>:  add</span><br><span class="line">  <span class="type">IL_0008</span>:  stloc.<span class="number">2</span></span><br><span class="line">  <span class="type">IL_0009</span>:  ldstr      <span class="string">&quot;i+j&quot;</span></span><br><span class="line">  <span class="type">IL_000e</span>:  ldloc.<span class="number">2</span></span><br><span class="line">  <span class="type">IL_000f</span>:  box        [mscorlib]<span class="type">System</span>.<span class="type">Int32</span></span><br><span class="line">  <span class="type">IL_0014</span>:  call       <span class="type">string</span> [mscorlib]<span class="type">System</span>.<span class="type">String</span>::<span class="type">Concat</span>(<span class="keyword">object</span>,</span><br><span class="line">                                                              <span class="keyword">object</span>)</span><br><span class="line">  <span class="type">IL_0019</span>:  call       <span class="type">void</span> [mscorlib]<span class="type">System</span>.<span class="type">Console</span>::<span class="type">WriteLine</span>(<span class="type">string</span>)</span><br><span class="line">  <span class="type">IL_001e</span>:  nop</span><br><span class="line">  <span class="type">IL_001f</span>:  ret</span><br><span class="line">} // <span class="keyword">end</span> <span class="keyword">of</span> <span class="keyword">method</span> <span class="type">Program</span>::<span class="type">Main</span></span><br></pre></td></tr></table></figure>
<p>&#x9700;&#x8981;&#x8865;&#x5145;&#x8BF4;&#x4E0B;&#xFF0C;&#x8BA1;&#x7B97;&#x673A;&#x91CC;&#x6240;&#x6709;&#x7684;&#x6570;&#x636E;&#x90FD;&#x662F;0&#x3001;1&#x683C;&#x5F0F;&#x7684;&#x673A;&#x5668;&#x7801;&#x3002;&#x4E0A;&#x9762;&#x8FD9;&#x6BB5;IL&#x4EE3;&#x7801;&#x5B58;&#x50A8;&#x5728;&#x8BA1;&#x7B97;&#x673A;&#x91CC;&#x4E5F;&#x662F;01&#x683C;&#x5F0F;&#x7684;&#xFF0C;&#x4E0D;&#x8FC7;&#x662F;&#x6709;&#x7279;&#x5B9A;&#x89C4;&#x5219;&#x7684;01&#x4EE3;&#x7801;&#x3002;&#x501F;&#x52A9;ILDASM &#x5DE5;&#x5177;&#xFF0C;&#x53EF;&#x4EE5;&#x628A;dll &#x63CF;&#x8FF0;&#x7684;01&#x673A;&#x5668;&#x7801;&#x8F6C;&#x6362;&#x6210;&#x4E0A;&#x8FF0;&#x53EF;&#x9605;&#x8BFB;&#x6027;&#x66F4;&#x597D;&#x7684;&#x6587;&#x672C;&#x4EE3;&#x7801;&#x3002;&#x5173;&#x4E8E;&#x4E0A;&#x9762;IL&#x4EE3;&#x7801;&#x7684;&#x4E00;&#x4E9B;&#x8BF4;&#x660E;&#xFF1A;<br>hidebysig&#xFF08;hide by signature&#xFF09;:&#x5177;&#x4F53;&#x8BB2;&#x5C31;&#x662F;&#x7236;&#x7C7B;&#x65B9;&#x6CD5;&#x548C;&#x5B50;&#x7C7B;&#x65B9;&#x6CD5;&#x540C;&#x540D;&#x540C;&#x53C2;&#x624D;&#x4F1A;&#x88AB;&#x9690;&#x85CF;&#x3002;&#x5047;&#x5982;&#x8BF4;&#x4ECE;IL&#x4EE3;&#x7801;&#x91CC;&#x53BB;&#x6389;&#x8FD9;&#x4E2A;hidebysig&#x58F0;&#x660E;&#xFF0C;&#x90A3;&#x4E48;&#x5B50;&#x7C7B;&#x65B9;&#x6CD5;&#x53EA;&#x8981;&#x8DDF;&#x7236;&#x7C7B;&#x65B9;&#x6CD5;&#x540D;&#x76F8;&#x540C;&#x5C31;&#x4F1A;&#x9690;&#x85CF;&#x7236;&#x7C7B;&#x540C;&#x540D;&#x65B9;&#x6CD5;&#x3002;&#x7236;&#x7C7B;&#x65B9;&#x6CD5;&#x88AB;&#x9690;&#x85CF;&#x540E;&#x901A;&#x8FC7;&#x5B50;&#x7C7B;&#x5BF9;&#x8C61;&#x662F;&#x6CA1;&#x6CD5;&#x8C03;&#x7528;&#x5230;&#x7684;&#x3002;<a href="http://stackoverflow.com/questions/656325/what-is-the-purpose-of-hidebysig-in-a-msil-method" target="_blank" rel="external">&#x66F4;&#x591A;&#x8BF4;&#x660E;</a><br>cil managed: &#x6258;&#x7BA1;&#x4EE3;&#x7801;&#x7684;&#x6807;&#x8BC6;<br>entrypoint&#xFF1A;&#x51FD;&#x6570;&#x5165;&#x53E3;&#x70B9;<br>32 (0x20)&#xFF1A;&#x4EE3;&#x7801;&#x7684;&#x5927;&#x5C0F;&#xFF0C;32&#x4E2A;bytes&#x3002;&#x662F;&#x600E;&#x4E48;&#x7B97;&#x51FA;&#x6765;&#x7684;&#x5462;&#xFF1F;IL_001f&#x51CF;&#x53BB;IL_0000  <a href=" http://stackoverflow.com/questions/6529647/what-does-code-size-in-msil-mean" target="_blank" rel="external">&#x66F4;&#x591A;&#x8BF4;&#x660E;</a><br>max stack 2&#xFF1A;<a href="http://stackoverflow.com/questions/1241308/how-does-the-net-il-maxstack-directive-work" target="_blank" rel="external">&#x5982;&#x4F55;&#x8BA1;&#x7B97;&#x7684;&#xFF1F;</a></p>
<p>&#x597D;&#x56F0;&#xFF0C;&#x672A;&#x5B8C;&#x5F85;&#x7EED;&#x2026;</p>
<hr>
<p>&#x524D;&#x4E24;&#x5468;&#x5199;&#x7684;&#x6587;&#x7AE0;&#x4E00;&#x76F4;&#x6CA1;&#x65F6;&#x95F4;&#x66F4;&#x65B0;&#x3002;&#x8FD9;&#x5468;&#x6253;&#x7B97;&#x5199;&#x5B8C;&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#xFF0C;&#x4F46;&#x53D1;&#x73B0;&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#x5199;&#x7684;&#x5F88;&#x7CBE;&#x5F69;&#x3002;&#x539F;&#x6587;&#xFF1A;<a href="http://www.jb51.net/article/39635.htm" target="_blank" rel="external">&#x4E00;&#x6B65;&#x6B65;&#x6559;&#x4F60;&#x8BFB;&#x61C2;NET&#x4E2D;IL</a>&#x3002;&#x6240;&#x4EE5;&#x63A8;&#x8350;&#x7ED9;&#x5927;&#x5BB6;&#x3002;&#x81EA;&#x5DF1;&#x505A;&#x4E2A;&#x8BFB;&#x4E66;&#x7B14;&#x8BB0;&#xFF0C;&#x4E86;&#x7ED3;&#x4F59;&#x6587;&#x3002;</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[闭包]]></title>
      <url>http://bytes1001.github.io/2015/09/03/2015-09-03-%E9%97%AD%E5%8C%85/</url>
      <content type="html"><![CDATA[<p>&#x6628;&#x5929;&#x5728;&#x516C;&#x53F8;&#x7FA4;&#x91CC;&#x6709;&#x540C;&#x4E8B;&#x804A;&#x5230;&#x95ED;&#x5305;&#xFF0C;&#x4E0D;&#x6E05;&#x695A;&#x6709;&#x4EC0;&#x4E48;&#x7528;&#xFF0C;&#x4E8E;&#x662F;&#x7CFB;&#x7EDF;&#x5B66;&#x4E60;&#x4E00;&#x756A;&#x5173;&#x4E8E;&#x95ED;&#x5305;&#x7684;&#x77E5;&#x8BC6;&#x3002;</p>
<h4 id="1-&#x4EC0;&#x4E48;&#x662F;&#x95ED;&#x5305;">1.&#x4EC0;&#x4E48;&#x662F;&#x95ED;&#x5305;</h4><blockquote>
<p> &#x5728;&#x8BA1;&#x7B97;&#x673A;&#x79D1;&#x5B66;&#x4E2D;&#xFF0C;&#x95ED;&#x5305;&#xFF08;Closure&#xFF09;&#x662F;&#x8BCD;&#x6CD5;&#x95ED;&#x5305;&#xFF08;Lexical Closure&#xFF09;&#x7684;&#x7B80;&#x79F0;&#xFF0C;&#x662F;&#x5F15;&#x7528;&#x4E86;&#x81EA;&#x7531;&#x53D8;&#x91CF;&#x7684;&#x51FD;&#x6570;&#x3002;&#x8FD9;&#x4E2A;&#x88AB;&#x5F15;&#x7528;&#x7684;&#x81EA;&#x7531;&#x53D8;&#x91CF;&#x5C06;&#x548C;&#x8FD9;&#x4E2A;&#x51FD;&#x6570;&#x4E00;&#x540C;&#x5B58;&#x5728;&#xFF0C;&#x5373;&#x4F7F;&#x5DF2;&#x7ECF;&#x79BB;&#x5F00;&#x4E86;&#x521B;&#x9020;&#x5B83;&#x7684;&#x73AF;&#x5883;&#x4E5F;&#x4E0D;&#x4F8B;&#x5916;&#x3002;&#x6240;&#x4EE5;&#xFF0C;&#x6709;&#x53E6;&#x4E00;&#x79CD;&#x8BF4;&#x6CD5;&#x8BA4;&#x4E3A;&#x95ED;&#x5305;&#x662F;&#x7531;&#x51FD;&#x6570;&#x548C;&#x4E0E;&#x5176;&#x76F8;&#x5173;&#x7684;&#x5F15;&#x7528;&#x73AF;&#x5883;&#x7EC4;&#x5408;&#x800C;&#x6210;&#x7684;&#x5B9E;&#x4F53;&#x3002;&#x95ED;&#x5305;&#x5728;&#x8FD0;&#x884C;&#x65F6;&#x53EF;&#x4EE5;&#x6709;&#x591A;&#x4E2A;&#x5B9E;&#x4F8B;&#xFF0C;&#x4E0D;&#x540C;&#x7684;&#x5F15;&#x7528;&#x73AF;&#x5883;&#x548C;&#x76F8;&#x540C;&#x7684;&#x51FD;&#x6570;&#x7EC4;&#x5408;&#x53EF;&#x4EE5;&#x4EA7;&#x751F;&#x4E0D;&#x540C;&#x7684;&#x5B9E;&#x4F8B;&#x3002;<br> </p><p style="text-align:right;">&#x2013;&#x5F15;&#x81EA;&#x7EF4;&#x57FA;&#x767E;&#x79D1;</p><p></p>
</blockquote>
<p>&#x95ED;&#x5305;&#x7684;&#x6982;&#x5FF5;&#x51FA;&#x73B0;&#x4E8E;60&#x5E74;&#x4EE3;&#xFF0C;&#x6700;&#x65E9;&#x5B9E;&#x73B0;&#x95ED;&#x5305;&#x7684;&#x7A0B;&#x5E8F;&#x8BED;&#x8A00;&#x662F;Scheme&#x3002;&#x4E4B;&#x540E;&#xFF0C;&#x95ED;&#x5305;&#x88AB;&#x5E7F;&#x6CDB;&#x4F7F;&#x7528;&#x4E8E;&#x51FD;&#x6570;&#x5F0F;&#x7F16;&#x7A0B;&#x8BED;&#x8A00;&#x5982;ML&#x8BED;&#x8A00;&#x548C;LISP&#x3002;&#x5F88;&#x591A;&#x547D;&#x4EE4;&#x5F0F;&#x7A0B;&#x5E8F;&#x8BED;&#x8A00;&#x4E5F;&#x5F00;&#x59CB;&#x652F;&#x6301;&#x95ED;&#x5305;&#x3002;</p>
<p>&#x5728;&#x4E00;&#x4E9B;&#x8BED;&#x8A00;&#x4E2D;&#xFF0C;&#x5728;&#x51FD;&#x6570;&#x4E2D;&#x53EF;&#x4EE5;&#xFF08;&#x5D4C;&#x5957;&#xFF09;&#x5B9A;&#x4E49;&#x53E6;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x65F6;&#xFF0C;&#x5982;&#x679C;&#x5185;&#x90E8;&#x7684;&#x51FD;&#x6570;&#x5F15;&#x7528;&#x4E86;&#x5916;&#x90E8;&#x7684;&#x51FD;&#x6570;&#x7684;&#x53D8;&#x91CF;&#xFF0C;&#x5219;&#x53EF;&#x80FD;&#x4EA7;&#x751F;&#x95ED;&#x5305;&#x3002;&#x8FD0;&#x884C;&#x65F6;&#xFF0C;&#x4E00;&#x65E6;&#x5916;&#x90E8;&#x7684; &#x51FD;&#x6570;&#x88AB;&#x6267;&#x884C;&#xFF0C;&#x4E00;&#x4E2A;&#x95ED;&#x5305;&#x5C31;&#x5F62;&#x6210;&#x4E86;&#xFF0C;&#x95ED;&#x5305;&#x4E2D;&#x5305;&#x542B;&#x4E86;&#x5185;&#x90E8;&#x51FD;&#x6570;&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x4EE5;&#x53CA;&#x6240;&#x9700;&#x5916;&#x90E8;&#x51FD;&#x6570;&#x4E2D;&#x7684;&#x53D8;&#x91CF;&#x7684;&#x5F15;&#x7528;&#x3002;&#x5176;&#x4E2D;&#x6240;&#x5F15;&#x7528;&#x7684;&#x53D8;&#x91CF;&#x79F0;&#x4F5C;&#x4E0A;&#x503C;(upvalue)&#x3002;</p>
<h4 id="2-&#x95ED;&#x5305;&#x793A;&#x4F8B;">2.&#x95ED;&#x5305;&#x793A;&#x4F8B;</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params"></span>)</span>{<span class="comment">//&#x5916;&#x90E8;&#x51FD;&#x6570;</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> a=<span class="string">&quot;hi&quot;</span>; <span class="comment">//&#x5C40;&#x90E8;&#x53D8;&#x91CF;&#xFF08;&#x81EA;&#x7531;&#x53D8;&#x91CF;&#xFF09;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> f2=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)//&#x5185;&#x90E8;&#x51FD;&#x6570;</span><br><span class="line"></span>{</span><br><span class="line"><span class="built_in">console</span>.log(a);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> f2;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> f=f1();<span class="comment">// &#x53D8;&#x91CF;f&#x5176;&#x5B9E;&#x6307;&#x5411;&#x7684;&#x662F;f2&#x51FD;&#x6570;</span></span><br><span class="line"></span><br><span class="line">f();<span class="comment">//&#x8F93;&#x51FA; hi</span></span><br></pre></td></tr></table></figure>
<p>&#x5F53;&#x5916;&#x90E8;&#x51FD;&#x6570;f1&#x88AB;&#x6267;&#x884C;&#x65F6;&#xFF0C;&#x4E00;&#x4E2A;&#x95ED;&#x5305;&#x5C31;&#x5F62;&#x6210;&#x4E86;&#x3002;&#x4E00;&#x822C;&#x628A;&#x8FD9;&#x4E2A;&#x5185;&#x90E8;&#x51FD;&#x6570;&#x53EB;&#x95ED;&#x5305;&#x51FD;&#x6570;&#x3002;&#x51FD;&#x6570;f2&#x63D0;&#x5347;&#x4E86;&#x53D8;&#x91CF;a&#x7684;&#x4F5C;&#x7528;&#x57DF;&#xFF0C;&#x4F7F;a&#x5373;&#x4F7F;&#x79BB;&#x5F00;&#x4E86;f1&#x7684;&#x4F5C;&#x7528;&#x57DF;&#xFF0C;&#x4ECD;&#x7136;&#x662F;&#x5B58;&#x5728;&#x7684;&#x3002;&#x76F4;&#x5230;&#x5185;&#x90E8;&#x51FD;&#x6570;f2&#x88AB;&#x6267;&#x884C;&#x5B8C;&#xFF0C;&#x624D;&#x4F1A;&#x88AB;GC(&#x5783;&#x573E;&#x7BA1;&#x7406;&#x5668;)&#x56DE;&#x6536;&#x6389;&#x3002;</p>
<p>&#x6BD4;&#x8F83;&#x5B66;&#x672F;&#x7684;&#x8BF4;&#x6CD5;&#x662F;&#xFF0C;f2&#x4F7F;f1&#x7684;&#x4F5C;&#x7528;&#x57DF;&#x94FE;&#x95ED;&#x5408;&#x4E86;,&#x8FD9;&#x6837;&#x4F5C;&#x7528;&#x57DF;&#x94FE;&#x4E0A;&#x7684;&#x5BF9;&#x8C61;a&#x5C31;&#x4E0D;&#x4F1A;&#x968F;&#x7740;f1&#x7684;&#x7ED3;&#x675F;&#x800C;&#x88AB;&#x91CA;&#x653E;&#x6389;&#x3002;</p>
<h4 id="3-&#x95ED;&#x5305;&#x6709;&#x4EC0;&#x4E48;&#x7528;">3.&#x95ED;&#x5305;&#x6709;&#x4EC0;&#x4E48;&#x7528;</h4><p>a.&#x7F13;&#x5B58;&#x5C40;&#x90E8;&#x53D8;&#x91CF;&#x63D0;&#x5347;&#x6027;&#x80FD;<br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> CacheData = (<span class="function"><span class="keyword">function</span><span class="params">()</span></span>{  </span><br><span class="line">    <span class="keyword">var</span> cache = {},  </span><br><span class="line">       count = [];  </span><br><span class="line">    <span class="keyword">return</span> {  </span><br><span class="line">       add : <span class="function"><span class="keyword">function</span><span class="params">(id)</span></span>{  </span><br><span class="line">           <span class="keyword">if</span>(id <span class="keyword">in</span> cache){<span class="comment">//&#x5982;&#x679C;&#x7ED3;&#x679C;&#x5728;&#x7F13;&#x5B58;&#x4E2D;  </span></span><br><span class="line">              <span class="keyword">return</span> cache[id];<span class="comment">//&#x76F4;&#x63A5;&#x8FD4;&#x56DE;&#x7F13;&#x5B58;&#x4E2D;&#x7684;&#x5BF9;&#x8C61;  </span></span><br><span class="line">           }  </span><br><span class="line">           <span class="keyword">var</span> flight = <span class="keyword">new</span> queryFlight(id);<span class="comment">//&#x65B0;&#x5EFA;  </span></span><br><span class="line">           cache[id] = flight;<span class="comment">//&#x66F4;&#x65B0;&#x7F13;&#x5B58;  </span></span><br><span class="line">           <span class="keyword">if</span>(count.length &gt; <span class="number">1000</span>){<span class="comment">//&#x4FDD;&#x6B63;&#x7F13;&#x5B58;&#x7684;&#x5927;&#x5C0F;&lt;=1000  </span></span><br><span class="line">              <span class="keyword">delete</span> cache[count.shift()];  </span><br><span class="line">           }  </span><br><span class="line">           <span class="keyword">return</span> flight;        </span><br><span class="line">       },  </span><br><span class="line">   </span><br><span class="line">       clear : <span class="function"><span class="keyword">function</span><span class="params">(id)</span></span>{  </span><br><span class="line">           <span class="keyword">if</span>(id <span class="keyword">in</span> cache){  </span><br><span class="line">              cache[id].clearSelection();    </span><br><span class="line">           }  </span><br><span class="line">       }  </span><br><span class="line">    };  </span><br><span class="line">})();  </span><br><span class="line">   </span><br><span class="line">CacheData.add(<span class="string">&quot;cz1001&quot;</span>);  <span class="comment">//&#x7B2C;&#x4E00;&#x6B21;&#x8C03;&#x7528;</span></span><br><span class="line">CacheData.add(<span class="string">&quot;cz1001&quot;</span>);  <span class="comment">//&#x7B2C;&#x4E8C;&#x6B21;&#x8C03;&#x7528;&#x76F4;&#x63A5;&#x4ECE;&#x7F13;&#x5B58;&#x91CC;&#x53D6;&#x4E86;&#x3002;</span></span><br></pre></td></tr></table></figure></p>
<p>b.&#x5B9E;&#x73B0;&#x9762;&#x5411;&#x5BF9;&#x8C61;&#x8BBE;&#x8BA1;&#x98CE;&#x683C;</p>
<p>&#x4F20;&#x7EDF;&#x7684;&#x5BF9;&#x8C61;&#x8BED;&#x8A00;&#x5982;java&#x3001; c# &#x90FD;&#x63D0;&#x4F9B;&#x4E86;&#x7C7B;&#x7684;&#x6A21;&#x677F;&#x673A;&#x5236;&#x6765;&#x521B;&#x5EFA;&#x5BF9;&#x8C61;&#x3002;&#x867D;&#x7136;js&#x662F;&#x9762;&#x5411;&#x8FC7;&#x7A0B;&#x8BBE;&#x8BA1;&#x7684;&#x8BED;&#x8A00;&#xFF0C;&#x4F46;&#x662F;&#x901A;&#x8FC7;&#x95ED;&#x5305;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x6A21;&#x62DF;&#x51FA;&#x9762;&#x5411;&#x5BF9;&#x8C61;&#x7684;&#x7279;&#x70B9;&#x3002;&#x5982;&#x5C5E;&#x6027;&#x5C01;&#x88C5;&#xFF0C;&#x7C7B;&#x7684;&#x5B9E;&#x4F8B;&#x3002;</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person = <span class="function"><span class="keyword">function</span><span class="params">()</span></span>{  </span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> name = <span class="string">&quot;ccf&quot;</span>; <span class="comment">//&#x53D8;&#x91CF;&#x4F5C;&#x7528;&#x57DF;&#x4E3A;&#x51FD;&#x6570;&#x5185;&#x90E8;&#xFF0C;&#x5916;&#x90E8;&#x65E0;&#x6CD5;&#x8BBF;&#x95EE;      </span></span><br><span class="line">     </span><br><span class="line">    <span class="keyword">return</span> {  </span><br><span class="line">       getName : <span class="function"><span class="keyword">function</span><span class="params">()</span></span>{  </span><br><span class="line">           <span class="keyword">return</span> name;  </span><br><span class="line">       },  </span><br><span class="line">       setName : <span class="function"><span class="keyword">function</span><span class="params">(newName)</span></span>{  </span><br><span class="line">           name = newName;  </span><br><span class="line">       }  </span><br><span class="line">    }  </span><br><span class="line">}();  </span><br><span class="line">   </span><br><span class="line"><span class="keyword">print</span>(person.name);<span class="comment">//&#x76F4;&#x63A5;&#x8BBF;&#x95EE;&#xFF0C;&#x7ED3;&#x679C;&#x4E3A;undefined  </span></span><br><span class="line"><span class="keyword">print</span>(person.getName());  </span><br><span class="line">person.setName(<span class="string">&quot;abruzzi&quot;</span>);  </span><br><span class="line"><span class="keyword">print</span>(person.getName());  </span><br><span class="line"> </span><br><span class="line">&#x5F97;&#x5230;&#x7ED3;&#x679C;&#x5982;&#x4E0B;&#xFF1A;</span><br><span class="line"> </span><br><span class="line">undefined</span><br><span class="line">ccf</span><br><span class="line">abruzzi</span><br><span class="line"></span><br><span class="line"><span class="comment">//&#x4E0B;&#x9762;&#x8FD9;&#x6BB5;&#x4EE3;&#x7801;&#x6F14;&#x793A;p1 p2 &#x662F;&#x51FD;&#x6570;person&#x7684;&#x5B9E;&#x4F8B;&#x3002;&#x76F8;&#x4E92;&#x72EC;&#x7ACB;&#x3002;</span></span><br><span class="line"><span class="keyword">var</span> p1=person();</span><br><span class="line">p1.setName(<span class="string">&quot;p1&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> p2=person();</span><br><span class="line">p2.setName(<span class="string">&quot;p2&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span>(p1.getName);<span class="comment">//p1</span></span><br><span class="line"><span class="keyword">print</span>(p2.getName);<span class="comment">//p2</span></span><br></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[10个习惯和10倍开发效率]]></title>
      <url>http://bytes1001.github.io/2015/08/28/2015-08-28-10xdeveloper/</url>
      <content type="html"><![CDATA[<h4 id="&#x82F1;&#x6587;&#x539F;&#x6587;_&#xFF1A;10_habits_of_10x_developers">&#x82F1;&#x6587;&#x539F;&#x6587; &#xFF1A;<a href="http://adamloving.com/internet-programming/10x-developers" target="_blank" rel="external">10 habits of 10x developers</a></h4><p>Brad Feld&#x7684;&#x4E00;&#x7BC7;&#x6587;&#x7AE0;&#x300A;The Rise of Developeronomics&#x300B;&#x4E2D;&#x63D0;&#x5230;&#x4E86;&#x201C;10&#x500D;&#x6548;&#x7387;&#x7684;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#xFF08;10x developer&#xFF09;&#x201D;&#x7684;&#x6982;&#x5FF5;&#xFF08;&#x5353;&#x8D8A;&#x7684;&#x5F00;&#x53D1;&#x8005;&#x7684;&#x6548;&#x7387;&#x5F80;&#x5F80;&#x6BD4;&#x4E00;&#x822C;&#x7684;&#x5F00;&#x53D1;&#x8005;&#x9AD8;&#x5F88;&#x591A;&#xFF0C;&#x800C;&#x4E0D;&#x53EA;&#x662F;&#x4E00;&#x70B9;&#x70B9;&#xFF09;&#xFF0C;Adam Loving &#x5728;&#x8BFB;&#x4E86;&#x4E4B;&#x540E;&#x53D7;&#x5230;&#x542F;&#x53D1;&#xFF0C;&#x5E76;&#x5411;&#x591A;&#x4F4D;&#x5927;&#x725B;&#xFF08;Ben Sharpe&#x3001;Collin Watson&#x548C;Jonathan Locke&#xFF09;&#x8BE2;&#x95EE;&#x5982;&#x4F55;&#x6210;&#x4E3A;&#x201C;10&#x500D;&#x6548;&#x7387;&#x7684;&#x5F00;&#x53D1;&#x8005;&#x201D;&#xFF0C;&#x6700;&#x540E;&#x5F97;&#x5230;&#x4E86;&#x4EE5;&#x4E0B;&#x7684;&#x7B54;&#x6848;&#x3002;</p>
<p><strong>1. &#x53EA;&#x505A;&#x9700;&#x8981;&#x505A;&#x7684;&#x5DE5;&#x4F5C;</strong></p>
<p>&#x4F7F;&#x7528;&#x654F;&#x6377;&#x65B9;&#x6CD5;&#xFF1B;<br>&#x5168;&#x5FC3;&#x5168;&#x610F;&#x505A;UX&#x8BBE;&#x8BA1;&#xFF1B;<br>&#x6C9F;&#x901A;&#x7B2C;&#x4E00;&#xFF1B;<br>&#x7F16;&#x7801;&#x4E5F;&#x8BB8;&#x4E0D;&#x662F;&#x89E3;&#x51B3;&#x95EE;&#x9898;&#x7684;&#x529E;&#x6CD5;&#xFF1B;<br>&#x8FC7;&#x65E9;&#x7684;&#x4F18;&#x5316;&#x662F;&#x4E00;&#x5207;&#x7F6A;&#x6076;&#x7684;&#x6839;&#x6E90;&#xFF1B;<br>&#x9009;&#x62E9;&#x6700;&#x7B80;&#x5355;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x3002;</p>
<p><strong>2. &#x7AD9;&#x5728;&#x5DE8;&#x4EBA;&#x7684;&#x80A9;&#x8180;&#x4E0A;</strong></p>
<p>&#x4F7F;&#x7528;&#x5F00;&#x6E90;&#x6846;&#x67B6;&#xFF1B;<br>&#x4F7F;&#x7528;&#x7B80;&#x6D01;&#x8BED;&#x8A00;&#xFF1B;<br>&#x4E0D;&#x8981;&#x505A;&#x91CD;&#x590D;&#x7684;&#x4E8B;&#x60C5;&#xFF08;&#x4E0D;&#x8981;&#x91CD;&#x65B0;&#x53D1;&#x660E;&#x8F6E;&#x5B50;&#xFF09;&#xFF1B;<br>&#x5229;&#x7528;&#x5305;&#x7BA1;&#x7406;&#x5668;&#x6765;&#x8FDB;&#x884C;&#x516C;&#x5171;&#x548C;&#x79C1;&#x6709;&#x4EE3;&#x7801;&#x5206;&#x914D;&#xFF1B;<br>&#x4E0D;&#x8981;&#x4EFB;&#x51ED;&#x5DE8;&#x5934;&#xFF08;&#x5982;&#x5FAE;&#x8F6F;&#xFF09;&#x7684;&#x6446;&#x5E03;&#x800C;&#x4FEE;&#x590D;&#x5E93;&#x4E2D;&#x7684;&#x4E00;&#x4E2A;Bug&#xFF1B;<br>&#x4E0D;&#x8981;&#x8BA9;&#x4F60;&#x7684;&#x96C7;&#x4E3B;&#x903C;&#x4F60;&#x5B66;&#x4E60;&#xFF1B;<br>&#x81EA;&#x4E3B;&#x5B66;&#x4E60;&#x5E76;&#x4E3A;&#x81EA;&#x5DF1;&#x8BBE;&#x5B9A;&#x65B0;&#x7684;&#x76EE;&#x6807;&#x3002;</p>
<p><strong>3. &#x4E86;&#x89E3;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x548C;&#x7B97;&#x6CD5;</strong></p>
<p>&#x5982;&#x679C;&#x4F60;&#x4E0D;&#x77E5;&#x9053;&#x4EC0;&#x4E48;&#x65F6;&#x5019;&#x5E94;&#x8BE5;&#x4F7F;&#x7528;&#x5FEB;&#x901F;&#x6392;&#x5E8F;&#x3001;&#x4E0D;&#x61C2;&#x8FA8;&#x8BA4;O(n2)&#x7A0B;&#x5E8F;&#x3001;&#x4E0D;&#x4F1A;&#x5199;&#x9012;&#x5F52;&#x51FD;&#x6570;&#xFF0C;&#x4F60;&#x5C06;&#x65E0;&#x6CD5;&#x6210;&#x4E3A;10&#x500D;&#x6548;&#x7387;&#x7684;&#x5F00;&#x53D1;&#x8005;&#x3002;&#x4F7F;&#x7528;&#x591A;&#x79CD;&#x8BED;&#x8A00;&#x4F60;&#x624D;&#x80FD;&#x6E05;&#x695A;&#x4E0D;&#x540C;&#x7684;&#x6846;&#x67B6;&#x662F;&#x5982;&#x4F55;&#x89E3;&#x51B3;&#x76F8;&#x540C;&#x95EE;&#x9898;&#x7684;&#x3002;&#x5C3D;&#x53EF;&#x80FD;&#x53BB;&#x4E86;&#x89E3;&#x5E95;&#x5C42;&#x547D;&#x4EE4;&#xFF08;plumbing&#xFF09;&#xFF0C;&#x4EE5;&#x4FBF;&#x80FD;&#x591F;&#x4F5C;&#x51FA;&#x660E;&#x667A;&#x7684;&#x51B3;&#x5B9A;&#xFF08;Web&#x6846;&#x67B6;&#x662F;&#x600E;&#x4E48;&#x5B58;&#x50A8;session&#x72B6;&#x6001;&#x7684;&#xFF1F;Cookie&#x5230;&#x5E95;&#x662F;&#x4EC0;&#x4E48;&#xFF1F;&#xFF09;&#x3002;</p>
<p><strong>4. &#x4E0D;&#x8981;&#x6015;&#x4E70;&#x5DE5;&#x5177;&#xFF0C;&#x5B83;&#x53EF;&#x4EE5;&#x8282;&#x7701;&#x4F60;&#x7684;&#x65F6;&#x95F4;</strong></p>
<p>Ben&#x8BF4;&#xFF1A;&#x201C;&#x6628;&#x5929;&#x6211;&#x82B1;50&#x7F8E;&#x5143;&#x4E70;&#x4E86;&#x4E00;&#x4E2A;&#x4F4D;&#x56FE;&#x5B57;&#x4F53;&#x5DE5;&#x5177;&#xFF0C;&#x5B83;&#x5E2E;&#x6211;&#x8282;&#x7701;&#x7684;&#x65F6;&#x95F4;&#x6210;&#x672C;&#x7EDD;&#x5BF9;&#x8D85;&#x8FC7;200&#x7F8E;&#x5143;&#x3002;&#x201D;</p>
<p><strong>5. &#x96C6;&#x4E2D;&#x6CE8;&#x610F;&#x529B;</strong></p>
<p>&#x4E0D;&#x8981;&#x6574;&#x5929;&#x5F00;&#x7740;&#x4F60;&#x7684;&#x7535;&#x5B50;&#x90AE;&#x4EF6;&#x3001;Twitter&#x3001;Facebook&#x7B49;&#xFF0C;&#x5728;&#x5DE5;&#x4F5C;&#x65F6;&#x5C06;&#x5B83;&#x4EEC;&#x6700;&#x5C0F;&#x5316;&#x6216;&#x5173;&#x6389;&#x5B83;&#x4EEC;&#xFF0C;&#x6234;&#x4E0A;&#x8033;&#x673A;&#x3002;Tiny hack&#x8BF4;&#xFF1A;&#x201C;&#x5373;&#x4F7F;&#x4E0D;&#x542C;&#x97F3;&#x4E50;&#x6211;&#x4E5F;&#x6234;&#x7740;&#x8033;&#x673A;&#x5DE5;&#x4F5C;&#xFF0C;&#x8FD9;&#x6837;&#x4FBF;&#x4E0D;&#x4F1A;&#x6709;&#x4EBA;&#x6253;&#x6270;&#x5230;&#x6211;&#x3002;&#x201D;</p>
<p><strong>6. &#x5C3D;&#x65E9;&#x5E76;&#x4E14;&#x7ECF;&#x5E38;&#x6027;&#x5730;&#x8FDB;&#x884C;&#x4EE3;&#x7801;&#x91CD;&#x6784;</strong></p>
<p>&#x6709;&#x65F6;&#xFF0C;&#x4F60;&#x4E0D;&#x5F97;&#x4E0D;&#x653E;&#x5F03;&#x6F02;&#x4EAE;&#x7684;&#x4EE3;&#x7801;&#x8F6C;&#x800C;&#x53BB;&#x5BFB;&#x627E;&#x771F;&#x6B63;&#x5BF9;&#x9879;&#x76EE;&#x6709;&#x7528;&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x4F46;&#x6CA1;&#x5173;&#x7CFB;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x7684;&#x73B0;&#x6709;&#x9879;&#x76EE;&#x4E2D;&#x6709;&#x8FD9;&#x6837;&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x6700;&#x597D;&#x7684;&#x65B9;&#x5F0F;&#x4FBF;&#x662F;&#x4E0D;&#x8981;&#x770B;&#x5B83;&#xFF0C;&#x5E76;&#x91CD;&#x6784;&#x3002;</p>
<p><strong>7. &#x53EA;&#x7BA1;&#x53BB;&#x505A;</strong></p>
<p>&#x5C06;&#x4F60;&#x7684;&#x4E1A;&#x4F59;&#x9879;&#x76EE;&#x5206;&#x4EAB;&#x5230;Startup Weekend&#x4E2D;&#x3002;&#x5728;&#x6211;&#x5F00;&#x59CB;&#x8F6C;&#x5230;Unix&#x548C;Ruby on Rails&#x4E0A;&#x4E4B;&#x524D;&#xFF0C;&#x6211;&#x4E70;&#x4E86;&#x4E00;&#x53F0;Mac&#xFF0C;&#x4F7F;&#x7528;Windows&#x865A;&#x62DF;&#x673A;&#x82B1;&#x4E86;&#x4E00;&#x5E74;&#x65F6;&#x95F4;&#x505A;.NET&#x9879;&#x76EE;&#x3002;</p>
<p><strong>8. &#x6311;&#x9009;&#x4E00;&#x4E2A;&#x7F16;&#x8F91;&#x5668;&#xFF0C;&#x5E76;&#x638C;&#x63E1;&#x5B83;</strong></p>
<p>&#x9AD8;&#x6548;&#x5F00;&#x53D1;&#x8005;&#x559C;&#x6B22;&#x7528;&#x6587;&#x672C;&#x7F16;&#x8F91;&#x5668;&#x80DC;&#x8FC7;IDE&#x7F16;&#x8F91;&#x5668;&#xFF0C;&#x56E0;&#x4E3A;&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x5B66;&#x5230;&#x66F4;&#x591A;&#x4E1C;&#x897F;&#x3002;&#x65E0;&#x8BBA;&#x4EC0;&#x4E48;&#x60C5;&#x51B5;&#xFF0C;&#x5C3D;&#x91CF;&#x4F7F;&#x7528;&#x952E;&#x76D8;&#x5FEB;&#x6377;&#x952E;&#xFF0C;&#x56E0;&#x4E3A;&#x719F;&#x7EC3;&#x4F7F;&#x7528;&#x4E00;&#x4EF6;&#x5DE5;&#x5177;&#x7684;&#x524D;&#x63D0;&#x662F;&#x719F;&#x6089;&#x5B83;&#x3002;</p>
<p>&#x5728;&#x9009;&#x62E9;&#x7F16;&#x8F91;&#x5668;&#x65F6;&#xFF0C;&#x8BA4;&#x771F;&#x8003;&#x8651;&#x5E76;&#x6311;&#x9009;&#x6700;&#x597D;&#x7684;&#xFF08;Emacs&#x6216;Vim&#xFF09;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x4EEC;&#x662F;&#x901A;&#x7528;&#x7684;&#x3002;&#x5176;&#x6B21;&#xFF0C;&#x6311;&#x9009;&#x4F60;&#x7684;&#x9996;&#x9009;&#x5E73;&#x53F0;&#x6700;&#x652F;&#x6301;&#x7684;&#x3002;&#x4F7F;&#x7528;&#x5B8F;&#xFF0C;&#x4E0D;&#x65AD;&#x5730;&#x5199;&#x4EE3;&#x7801;&#xFF1B;&#x4F7F;&#x7528;Mac&#x4E0A;&#x7684;TextExpander&#x4E3A;&#x6574;&#x4E2A;&#x6BB5;&#x843D;&#x521B;&#x5EFA;&#x5FEB;&#x6377;&#x65B9;&#x5F0F;&#xFF1B;&#x4F7F;&#x7528;Visual Studio&#x6216;SublimeText&#x7684;&#x81EA;&#x52A8;&#x8865;&#x9F50;&#x529F;&#x80FD;&#xFF1B;&#x4F7F;&#x7528;&#x652F;&#x6301;&#x6309;&#x884C;/&#x5217;&#x5206;&#x5272;&#x7A97;&#x53E3;&#x7684;&#x7F16;&#x8F91;&#x5668;&#xFF0C;&#x8FD9;&#x6837;&#x4F60;&#x4FBF;&#x80FD;&#x540C;&#x65F6;&#x770B;&#x5230;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x548C;&#x4EE3;&#x7801;&#xFF08;&#x6216;&#x6A21;&#x578B;&#x3001;&#x89C6;&#x56FE;&#xFF09;&#x3002;</p>
<p>&#x4E00;&#x5B9A;&#x8981;&#x60F3;&#x6E05;&#x695A;&#x540E;&#x518D;&#x5199;&#x4EE3;&#x7801;&#x3002;Adam&#x8BF4;&#xFF0C;&#x201C;&#x6211;&#x6709;&#x670B;&#x53CB;&#x5728;&#x4E00;&#x4E2A;&#x5927;&#x9879;&#x76EE;&#x7EC4;&#x91CC;&#x5DE5;&#x4F5C;&#xFF0C;&#x4ED6;&#x4EEC;&#x7EC4;&#x91CC;&#x6700;&#x9AD8;&#x6548;&#x7684;&#x7A0B;&#x5E8F;&#x5458;&#x662F;&#x4E00;&#x4E2A;&#x9AD8;&#x4F4D;&#x622A;&#x762B;&#x7528;&#x5634;&#x53FC;&#x7740;&#x68CD;&#x5B50;&#x6572;&#x4EE3;&#x7801;&#x7684;&#x4EBA;&#xFF0C;&#x4ED6;&#x603B;&#x662F;&#x5728;&#x5199;&#x4EE3;&#x7801;&#x4E4B;&#x524D;&#x60F3;&#x5F97;&#x5F88;&#x4ED4;&#x7EC6;&#x4E14;&#x5F88;&#x5C11;&#x51FA;&#x9519;&#x3002;&#x201D;</p>
<p><strong>9. &#x6574;&#x6D01;&#x7684;&#x4EE3;&#x7801;&#x80DC;&#x8FC7;&#x5DE7;&#x5999;&#x7684;&#x4EE3;&#x7801;</strong></p>
<p>&#x8981;&#x60F3;&#x8BA9;&#x5176;&#x4ED6;&#x4EBA;&#x80FD;&#x591F;&#x8BFB;&#x61C2;&#x4F60;&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x5C3D;&#x91CF;&#x4F7F;&#x7528;&#x6700;&#x5C11;&#x7684;&#x4EE3;&#x7801;&#x6765;&#x5B8C;&#x6210;&#x4EFB;&#x52A1;&#x3002;&#x9075;&#x5FAA;DRY&#xFF08;Don&#x2019;t repeat yourself&#xFF09;&#x7684;&#x539F;&#x5219;&#xFF0C;&#x4F7F;&#x7528;&#x660E;&#x786E;&#x5B9A;&#x4E49;&#x7684;&#x5BF9;&#x8C61;&#x548C;&#x5E93;&#xFF0C;&#x5C06;&#x4EFB;&#x52A1;&#x5206;&#x89E3;&#x6210;&#x5C0F;&#x800C;&#x7B80;&#x5355;&#x7684;&#x4EE3;&#x7801;&#x6BB5;&#x3002;</p>
<p><strong>10. &#x6F5C;&#x610F;&#x8BC6;&#x662F;&#x5F3A;&#x5927;&#x7684;&#x5DE5;&#x5177;</strong></p>
<p>&#x79BB;&#x5F00;10&#x5206;&#x949F;&#x5F80;&#x5F80;&#x5C31;&#x53EF;&#x4EE5;&#x89E3;&#x51B3;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#x3002;&#x63A7;&#x5236;&#x7F16;&#x7A0B;&#x65F6;&#x95F4;&#xFF0C;&#x7ED9;&#x81EA;&#x5DF1;&#x4E00;&#x4E2A;&#x591A;&#x59FF;&#x591A;&#x5F69;&#x7684;&#x751F;&#x6D3B;&#xFF0C;&#x52B3;&#x9038;&#x7ED3;&#x5408;&#x80FD;&#x8BA9;&#x4F60;&#x5728;&#x5DE5;&#x4F5C;&#x65F6;&#x66F4;&#x9AD8;&#x6548;&#x3001;&#x66F4;&#x6109;&#x60A6;&#x3002;&#x5F53;&#x7136;&#xFF0C;&#x5373;&#x4FBF;&#x662F;&#x4E0A;&#x4E86;&#x5E74;&#x7EAA;&#x7684;&#x7A0B;&#x5E8F;&#x5458;&#x4E5F;&#x77E5;&#x9053;&#xFF0C;&#x4EE5;&#x6700;&#x5C11;&#x7684;&#x65F6;&#x95F4;&#x5B8C;&#x6210;&#x6700;&#x9AD8;&#x6548;&#x7684;&#x5DE5;&#x4F5C;&#x662F;&#x6210;&#x4E3A;10&#x500D;&#x6548;&#x7387;&#x5F00;&#x53D1;&#x8005;&#x7684;&#x5FC5;&#x8981;&#x6761;&#x4EF6;&#x3002;</p>
<p>&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x7A0B;&#x5E8F;&#x5458;&#xFF0C;&#x6211;&#x89C9;&#x5F97;&#x5728;&#x804C;&#x4E1A;&#x751F;&#x6DAF;&#x4E2D;&#x6700;&#x597D;&#x7684;&#x4E00;&#x4EF6;&#x4E8B;&#x513F;&#x5C31;&#x662F;&#x4ECE;&#x7535;&#x8111;&#x524D;&#x7AD9;&#x8D77;&#x6765;&#xFF0C;&#x53BB;&#x62DC;&#x8BBF;&#x90A3;&#x4E9B;&#x5728;&#x67D0;&#x4E00;&#x9886;&#x57DF;&#x6709;&#x6240;&#x5EFA;&#x6811;&#x7684;&#x4EBA;&#x4EEC;&#x3002;</p>
<p><strong>11. &#x63A8;&#x52A8;&#x81EA;&#x8EAB;&#x548C;&#x56E2;&#x961F;&#x8FDB;&#x6B65;</strong> &#xFF08;&#x52A0;&#x4E00;&#x4E2A;&#xFF09;</p>
<p>&#x91CD;&#x89C6;&#x6279;&#x8BC4;&#xFF0C;&#x4EE5;&#x5305;&#x5BB9;&#x7684;&#x6001;&#x5EA6;&#x63A5;&#x53D7;&#x6279;&#x8BC4;&#x5E76;&#x63D0;&#x5347;&#x81EA;&#x5DF1;&#x662F;&#x975E;&#x5E38;&#x91CD;&#x8981;&#x7684;&#x4E8B;&#x60C5;&#x3002;&#x6CA1;&#x6709;&#x8FD9;&#x4E2A;&#x57FA;&#x7840;&#xFF0C;&#x4F60;&#x4E0D;&#x53EF;&#x80FD;&#x6210;&#x4E3A;&#x4E00;&#x4E2A;&#x9AD8;&#x6548;&#x7684;&#x5F00;&#x53D1;&#x8005;&#x3002;&#x4E00;&#x4F4D;&#x667A;&#x8005;&#x66FE;&#x7ECF;&#x8BF4;&#x8FC7;&#xFF1A;&#x201C;&#x806A;&#x660E;&#x7684;&#x4EBA;&#x5584;&#x4E8E;&#x4ECE;&#x81EA;&#x5DF1;&#x7684;&#x9519;&#x8BEF;&#x4E2D;&#x5B66;&#x4E60;&#xFF0C;&#x800C;&#x667A;&#x6167;&#x7684;&#x4EBA;&#x5584;&#x4E8E;&#x4ECE;&#x522B;&#x4EBA;&#x7684;&#x9519;&#x8BEF;&#x4E2D;&#x5B66;&#x4E60;&#x3002;&#x201D;</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[sql语句执行顺序]]></title>
      <url>http://bytes1001.github.io/2015/08/27/2015-08-27-sql%E6%89%A7%E8%AF%AD%E5%8F%A5%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F/</url>
      <content type="html"><![CDATA[<p>&#x4ECE;&#x7F51;&#x4E0A;&#x5B66;&#x4E60;&#x4E86;&#x4E0B;sql&#x8BED;&#x53E5;&#x7684;&#x6267;&#x884C;&#x987A;&#x5E8F;&#x3002;&#x505A;&#x4E2A;&#x7B14;&#x8BB0;&#xFF1A;</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">(8)<span class="operator"><span class="keyword">SELECT</span> (<span class="number">9</span>)<span class="keyword">DISTINCT</span>  (<span class="number">11</span>)&lt;Top <span class="keyword">Num</span>&gt; &lt;<span class="keyword">select</span> <span class="keyword">list</span>&gt;</span><br><span class="line">(<span class="number">1</span>)<span class="keyword">FROM</span> [left_table]</span><br><span class="line">(<span class="number">3</span>)&lt;join_type&gt; <span class="keyword">JOIN</span> &lt;right_table&gt;</span><br><span class="line">(<span class="number">2</span>)        <span class="keyword">ON</span> &lt;join_condition&gt;</span><br><span class="line">(<span class="number">4</span>)<span class="keyword">WHERE</span> &lt;where_condition&gt;</span><br><span class="line">(<span class="number">5</span>)<span class="keyword">GROUP</span> <span class="keyword">BY</span> &lt;group_by_list&gt;</span><br><span class="line">(<span class="number">6</span>)<span class="keyword">WITH</span> &lt;<span class="keyword">CUBE</span> | <span class="keyword">RollUP</span>&gt;</span><br><span class="line">(<span class="number">7</span>)<span class="keyword">HAVING</span> &lt;having_condition&gt;</span><br><span class="line">(<span class="number">10</span>)<span class="keyword">ORDER</span> <span class="keyword">BY</span> &lt;order_by_list&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="&#x903B;&#x8F91;&#x67E5;&#x8BE2;&#x5904;&#x7406;&#x987A;&#x5E8F;&#xFF1A;">&#x903B;&#x8F91;&#x67E5;&#x8BE2;&#x5904;&#x7406;&#x987A;&#x5E8F;&#xFF1A;</h4><p>(1)<strong>FROM</strong>: &#x5BF9;FROM&#x5B50;&#x53E5;&#x4E2D;&#x7684;&#x524D;&#x4E24;&#x4E2A;&#x8868;&#x6267;&#x884C;&#x7B1B;&#x5361;&#x5C14;&#x79EF;&#xFF08;Cartesian product)(&#x4EA4;&#x53C9;&#x8054;&#x63A5;&#xFF09;&#xFF0C;&#x751F;&#x6210;&#x865A;&#x62DF;&#x8868;VT1</p>
<p>(2)<strong>ON</strong>: &#x5BF9;VT1&#x5E94;&#x7528;ON&#x7B5B;&#x9009;&#x5668;&#x3002;&#x53EA;&#x6709;&#x90A3;&#x4E9B;&#x4F7F;<join_condition>&#x4E3A;&#x771F;&#x7684;&#x884C;&#x624D;&#x88AB;&#x63D2;&#x5165;VT2&#x3002;</join_condition></p>
<p>(3)<strong>OUTER(JOIN)</strong>&#xFF1A;&#x5982;&#x679C;&#x6307;&#x5B9A;&#x4E86;OUTER JOIN&#xFF08;&#x76F8;&#x5BF9;&#x4E8E;CROSS JOIN &#x6216;(INNER JOIN),&#x4FDD;&#x7559;&#x8868;&#xFF08;preserved table&#xFF1A;&#x5DE6;&#x5916;&#x90E8;&#x8054;&#x63A5;&#x628A;&#x5DE6;&#x8868;&#x6807;&#x8BB0;&#x4E3A;&#x4FDD;&#x7559;&#x8868;&#xFF0C;&#x53F3;&#x5916;&#x90E8;&#x8054;&#x63A5;&#x628A;&#x53F3;&#x8868;&#x6807;&#x8BB0;&#x4E3A;&#x4FDD;&#x7559;&#x8868;&#xFF0C;&#x5B8C;&#x5168;&#x5916;&#x90E8;&#x8054;&#x63A5;&#x628A;&#x4E24;&#x4E2A;&#x8868;&#x90FD;&#x6807;&#x8BB0;&#x4E3A;&#x4FDD;&#x7559;&#x8868;&#xFF09;&#x4E2D;&#x672A;&#x627E;&#x5230;&#x5339;&#x914D;&#x7684;&#x884C;&#x5C06;&#x4F5C;&#x4E3A;&#x5916;&#x90E8;&#x884C;&#x6DFB;&#x52A0;&#x5230; VT2,&#x751F;&#x6210;VT3.&#x5982;&#x679C;FROM&#x5B50;&#x53E5;&#x5305;&#x542B;&#x4E24;&#x4E2A;&#x4EE5;&#x4E0A;&#x7684;&#x8868;&#xFF0C;&#x5219;&#x5BF9;&#x4E0A;&#x4E00;&#x4E2A;&#x8054;&#x63A5;&#x751F;&#x6210;&#x7684;&#x7ED3;&#x679C;&#x8868;&#x548C;&#x4E0B;&#x4E00;&#x4E2A;&#x8868;&#x91CD;&#x590D;&#x6267;&#x884C;&#x6B65;&#x9AA4;1&#x5230;&#x6B65;&#x9AA4;3&#xFF0C;&#x76F4;&#x5230;&#x5904;&#x7406;&#x5B8C;&#x6240;&#x6709;&#x7684;&#x8868;&#x4E3A;&#x6B62;&#x3002;</p>
<p>(4)<strong>WHERE</strong>&#xFF1A;&#x5BF9;VT3&#x5E94;&#x7528;WHERE&#x7B5B;&#x9009;&#x5668;&#x3002;&#x53EA;&#x6709;&#x4F7F;<where_condition>&#x4E3A;true&#x7684;&#x884C;&#x624D;&#x88AB;&#x63D2;&#x5165;VT4.</where_condition></p>
<p>(5)<strong>GROUP BY</strong>&#xFF1A;&#x6309;GROUP BY&#x5B50;&#x53E5;&#x4E2D;&#x7684;&#x5217;&#x5217;&#x8868;&#x5BF9;VT4&#x4E2D;&#x7684;&#x884C;&#x5206;&#x7EC4;&#xFF0C;&#x751F;&#x6210;VT5.</p>
<p>(6)<strong>CUBE|ROLLUP</strong>&#xFF1A;&#x628A;&#x8D85;&#x7EC4;(Suppergroups)&#x63D2;&#x5165;VT5,&#x751F;&#x6210;VT6.</p>
<p>(7)<strong>HAVING</strong>&#xFF1A;&#x5BF9;VT6&#x5E94;&#x7528;HAVING&#x7B5B;&#x9009;&#x5668;&#x3002;&#x53EA;&#x6709;&#x4F7F;<having_condition>&#x4E3A;true&#x7684;&#x7EC4;&#x624D;&#x4F1A;&#x88AB;&#x63D2;&#x5165;VT7.</having_condition></p>
<p>(8)<strong>SELECT</strong>&#xFF1A;&#x5904;&#x7406;SELECT&#x5217;&#x8868;&#xFF0C;&#x4EA7;&#x751F;VT8.</p>
<p>(9)<strong>DISTINCT</strong>&#xFF1A;&#x5C06;&#x91CD;&#x590D;&#x7684;&#x884C;&#x4ECE;VT8&#x4E2D;&#x79FB;&#x9664;&#xFF0C;&#x4EA7;&#x751F;VT9.</p>
<p>(10)<strong>ORDER BY</strong>&#xFF1A;&#x5C06;VT9&#x4E2D;&#x7684;&#x884C;&#x6309;ORDER BY &#x5B50;&#x53E5;&#x4E2D;&#x7684;&#x5217;&#x5217;&#x8868;&#x6392;&#x5E8F;&#xFF0C;&#x751F;&#x6210;&#x6E38;&#x6807;&#xFF08;VC10).</p>
<p>(11)<strong>TOP</strong>&#xFF1A;&#x4ECE;VC10&#x7684;&#x5F00;&#x59CB;&#x5904;&#x9009;&#x62E9;&#x6307;&#x5B9A;&#x6570;&#x91CF;&#x6216;&#x6BD4;&#x4F8B;&#x7684;&#x884C;&#xFF0C;&#x751F;&#x6210;&#x8868;VT11,&#x5E76;&#x8FD4;&#x56DE;&#x8C03;&#x7528;&#x8005;&#x3002;</p>
<p>&#x6CE8;&#xFF1A;&#x6B65;&#x9AA4;10&#xFF0C;&#x6309;ORDER BY&#x5B50;&#x53E5;&#x4E2D;&#x7684;&#x5217;&#x5217;&#x8868;&#x6392;&#x5E8F;&#x4E0A;&#x6B65;&#x8FD4;&#x56DE;&#x7684;&#x884C;&#xFF0C;&#x8FD4;&#x56DE;&#x6E38;&#x6807;VC10.&#x8FD9;&#x4E00;&#x6B65;&#x662F;&#x7B2C;&#x4E00;&#x6B65;&#x4E5F;&#x662F;&#x552F;&#x4E00;&#x4E00;&#x6B65;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;SELECT&#x5217;&#x8868;&#x4E2D;&#x7684;&#x5217;&#x522B;&#x540D;&#x7684;&#x6B65;&#x9AA4;&#x3002;&#x8FD9;&#x4E00;&#x6B65;&#x4E0D;&#x540C;&#x4E8E;&#x5176;&#x5B83;&#x6B65;&#x9AA4;&#x7684; &#x662F;&#xFF0C;&#x5B83;&#x4E0D;&#x8FD4;&#x56DE;&#x6709;&#x6548;&#x7684;&#x8868;&#xFF0C;&#x800C;&#x662F;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x6E38;&#x6807;&#x3002;SQL&#x662F;&#x57FA;&#x4E8E;&#x96C6;&#x5408;&#x7406;&#x8BBA;&#x7684;&#x3002;&#x96C6;&#x5408;&#x4E0D;&#x4F1A;&#x9884;&#x5148;&#x5BF9;&#x5B83;&#x7684;&#x884C;&#x6392;&#x5E8F;&#xFF0C;&#x5B83;&#x53EA;&#x662F;&#x6210;&#x5458;&#x7684;&#x903B;&#x8F91;&#x96C6;&#x5408;&#xFF0C;&#x6210;&#x5458;&#x7684;&#x987A;&#x5E8F;&#x65E0;&#x5173;&#x7D27;&#x8981;&#x3002;&#x5BF9;&#x8868;&#x8FDB;&#x884C;&#x6392;&#x5E8F; &#x7684;&#x67E5;&#x8BE2;&#x53EF;&#x4EE5;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#xFF0C;&#x5305;&#x542B;&#x6309;&#x7279;&#x5B9A;&#x7269;&#x7406;&#x987A;&#x5E8F;&#x7EC4;&#x7EC7;&#x7684;&#x884C;&#x3002;ANSI&#x628A;&#x8FD9;&#x79CD;&#x5BF9;&#x8C61;&#x79F0;&#x4E3A;&#x6E38;&#x6807;&#x3002;&#x7406;&#x89E3;&#x8FD9;&#x4E00;&#x6B65;&#x662F;&#x6B63;&#x786E;&#x7406;&#x89E3;SQL&#x7684;&#x57FA;&#x7840;&#x3002;</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[IEnumerator &IEnumerable]]></title>
      <url>http://bytes1001.github.io/2015/08/17/2015-08-17-ienumerator/</url>
      <content type="html"><![CDATA[<p>&#x5148;&#x770B;&#x770B;<strong>IEnumerator</strong> &#x548C;<strong>IEnumerable</strong>&#x7684;&#x63A5;&#x53E3;&#x5B9A;&#x4E49;:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Runtime.InteropServices;</span><br><span class="line"><span class="keyword">namespace</span> <span class="title">System.Collections</span></span><br><span class="line">{</span><br><span class="line">    <span class="comment">// &#x6458;&#x8981;:</span></span><br><span class="line">    <span class="comment">//     &#x516C;&#x5F00;&#x679A;&#x4E3E;&#x6570;&#xFF0C;&#x8BE5;&#x679A;&#x4E3E;&#x6570;&#x652F;&#x6301;&#x5728;&#x975E;&#x6CDB;&#x578B;&#x96C6;&#x5408;&#x4E0A;&#x8FDB;&#x884C;&#x7B80;&#x5355;&#x8FED;&#x4EE3;&#x3002;</span></span><br><span class="line">    [ComVisible(<span class="keyword">true</span>)]</span><br><span class="line">    [Guid(<span class="string">&quot;496B0ABE-CDEE-11d3-88E8-00902754C43A&quot;</span>)]</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">interface</span> <span class="title">IEnumerable</span></span><br><span class="line">    {</span><br><span class="line">        <span class="comment">// &#x6458;&#x8981;:</span></span><br><span class="line">        <span class="comment">//     &#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x5FAA;&#x73AF;&#x8BBF;&#x95EE;&#x96C6;&#x5408;&#x7684;&#x679A;&#x4E3E;&#x6570;&#x3002;</span></span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">        <span class="comment">// &#x8FD4;&#x56DE;&#x7ED3;&#x679C;:</span></span><br><span class="line">        <span class="comment">//     &#x4E00;&#x4E2A;&#x53EF;&#x7528;&#x4E8E;&#x5FAA;&#x73AF;&#x8BBF;&#x95EE;&#x96C6;&#x5408;&#x7684; System.Collections.IEnumerator &#x5BF9;&#x8C61;&#x3002;</span></span><br><span class="line">        [DispId(-<span class="number">4</span>)]</span><br><span class="line">        <span class="function">IEnumerator <span class="title">GetEnumerator</span>(<span class="params"></span>)</span>;</span><br><span class="line">    }</span><br><span class="line"> </span><br><span class="line">    <span class="comment">// &#x6458;&#x8981;:</span></span><br><span class="line">    <span class="comment">//     &#x652F;&#x6301;&#x5BF9;&#x975E;&#x6CDB;&#x578B;&#x96C6;&#x5408;&#x7684;&#x7B80;&#x5355;&#x8FED;&#x4EE3;&#x3002;</span></span><br><span class="line">    [ComVisible(<span class="keyword">true</span>)]</span><br><span class="line">    [Guid(<span class="string">&quot;496B0ABF-CDEE-11d3-88E8-00902754C43A&quot;</span>)]</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">interface</span> <span class="title">IEnumerator</span></span><br><span class="line">    {</span><br><span class="line">        <span class="comment">// &#x6458;&#x8981;:</span></span><br><span class="line">        <span class="comment">//     &#x83B7;&#x53D6;&#x96C6;&#x5408;&#x4E2D;&#x7684;&#x5F53;&#x524D;&#x5143;&#x7D20;&#x3002;</span></span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">        <span class="comment">// &#x8FD4;&#x56DE;&#x7ED3;&#x679C;:</span></span><br><span class="line">        <span class="comment">//     &#x96C6;&#x5408;&#x4E2D;&#x7684;&#x5F53;&#x524D;&#x5143;&#x7D20;&#x3002;</span></span><br><span class="line">        <span class="keyword">object</span> Current { <span class="keyword">get</span>; }</span><br><span class="line">        <span class="comment">// &#x6458;&#x8981;:</span></span><br><span class="line">        <span class="comment">//     &#x5C06;&#x679A;&#x4E3E;&#x6570;&#x63A8;&#x8FDB;&#x5230;&#x96C6;&#x5408;&#x7684;&#x4E0B;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x3002;</span></span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">        <span class="comment">// &#x8FD4;&#x56DE;&#x7ED3;&#x679C;:</span></span><br><span class="line">        <span class="comment">//     &#x5982;&#x679C;&#x679A;&#x4E3E;&#x6570;&#x6210;&#x529F;&#x5730;&#x63A8;&#x8FDB;&#x5230;&#x4E0B;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#xFF0C;&#x5219;&#x4E3A; true&#xFF1B;&#x5982;&#x679C;&#x679A;&#x4E3E;&#x6570;&#x8D8A;&#x8FC7;&#x96C6;&#x5408;&#x7684;&#x7ED3;&#x5C3E;&#xFF0C;&#x5219;&#x4E3A; false&#x3002;</span></span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">        <span class="comment">// &#x5F02;&#x5E38;:</span></span><br><span class="line">        <span class="comment">//   System.InvalidOperationException:</span></span><br><span class="line">        <span class="comment">//     &#x5728;&#x521B;&#x5EFA;&#x4E86;&#x679A;&#x4E3E;&#x6570;&#x540E;&#x96C6;&#x5408;&#x88AB;&#x4FEE;&#x6539;&#x4E86;&#x3002;</span></span><br><span class="line">        <span class="function"><span class="keyword">bool</span> <span class="title">MoveNext</span>(<span class="params"></span>)</span>;</span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">        <span class="comment">// &#x6458;&#x8981;:</span></span><br><span class="line">        <span class="comment">//     &#x5C06;&#x679A;&#x4E3E;&#x6570;&#x8BBE;&#x7F6E;&#x4E3A;&#x5176;&#x521D;&#x59CB;&#x4F4D;&#x7F6E;&#xFF0C;&#x8BE5;&#x4F4D;&#x7F6E;&#x4F4D;&#x4E8E;&#x96C6;&#x5408;&#x4E2D;&#x7B2C;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x4E4B;&#x524D;&#x3002;</span></span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">        <span class="comment">// &#x5F02;&#x5E38;:</span></span><br><span class="line">        <span class="comment">//   System.InvalidOperationException:</span></span><br><span class="line">        <span class="comment">//     &#x5728;&#x521B;&#x5EFA;&#x4E86;&#x679A;&#x4E3E;&#x6570;&#x540E;&#x96C6;&#x5408;&#x88AB;&#x4FEE;&#x6539;&#x4E86;&#x3002;</span></span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">Reset</span>(<span class="params"></span>)</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<p><strong>&#x4E09;&#x79CD;&#x8FED;&#x4EE3;&#x96C6;&#x5408;&#x7684;&#x65B9;&#x5F0F;</strong></p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Test</span>(<span class="params"></span>)</span><br><span class="line"></span>{</span><br><span class="line">    <span class="keyword">var</span> list = <span class="keyword">new</span> List&lt;<span class="keyword">int</span>&gt; { <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span> };</span><br><span class="line">    <span class="keyword">var</span> en = list.GetEnumerator();</span><br><span class="line">    <span class="keyword">while</span> (en.MoveNext())</span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">int</span> a = en.Current;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">foreach</span> (<span class="keyword">var</span> item <span class="keyword">in</span> list)<span class="comment">//</span></span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">int</span> a = item;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; list.Count; i++)</span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">int</span> a = list[i];</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<p>foreach &#x548C; for &#x90FD;&#x53EF;&#x4EE5;&#x8FED;&#x4EE3;&#x679A;&#x4E3E;&#x96C6;&#x5408;&#x4E2D;&#x7684;&#x5143;&#x7D20;&#x3002;foreach&#x662F;&#x5BF9;&#x8C61;&#x8FED;&#x4EE3;&#x5668;&#xFF0C;&#x8BED;&#x6CD5;&#x66F4;&#x7B80;&#x6D01;&#xFF0C;&#x5B83;&#x8981;&#x6C42;list&#x5B9E;&#x73B0;IEnumerable &#x63A5;&#x53E3;&#x7684;GetEnumerator&#x65B9;&#x6CD5;&#x3002;</p>
<p><strong>&#x81EA;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x96C6;&#x5408;&#x7C7B;&#x578B;</strong><br><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">MyCarIEnumerator</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Garage</span>:<span class="title">IEnumerable</span></span><br><span class="line">    {</span><br><span class="line">        Car[] carArray = <span class="keyword">new</span> Car[<span class="number">4</span>];</span><br><span class="line">        <span class="comment">//&#x542F;&#x52A8;&#x65F6;&#x586B;&#x5145;&#x4E00;&#x4E9B;Car&#x5BF9;&#x8C61;</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Garage</span>(<span class="params"></span>)</span><br><span class="line">        </span>{</span><br><span class="line">            carArray[<span class="number">0</span>] = <span class="keyword">new</span> Car(<span class="string">&quot;Rusty&quot;</span>, <span class="number">30</span>);</span><br><span class="line">            carArray[<span class="number">1</span>] = <span class="keyword">new</span> Car(<span class="string">&quot;Clunker&quot;</span>, <span class="number">50</span>);</span><br><span class="line">            carArray[<span class="number">2</span>] = <span class="keyword">new</span> Car(<span class="string">&quot;Zippy&quot;</span>, <span class="number">30</span>);</span><br><span class="line">            carArray[<span class="number">3</span>] = <span class="keyword">new</span> Car(<span class="string">&quot;Fred&quot;</span>, <span class="number">45</span>);</span><br><span class="line">        }</span><br><span class="line">        <span class="function"><span class="keyword">public</span> IEnumerator <span class="title">GetEnumerator</span>(<span class="params"></span>)</span><br><span class="line">        </span>{</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span>.carArray.GetEnumerator();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="comment">//&#x4FEE;&#x6539;Garage&#x7C7B;&#x578B;&#x4E4B;&#x540E;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x5728;C#foreach&#x7ED3;&#x6784;&#x4E2D;&#x5B89;&#x5168;&#x4F7F;&#x7528;&#x8BE5;&#x7C7B;&#x578B;&#x4E86;&#x3002;</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">//&#x9664;&#x6B64;&#x4E4B;&#x5916;&#xFF0C;GetEnumerator()&#x88AB;&#x5B9A;&#x4E49;&#x4E3A;&#x516C;&#x5F00;&#x7684;&#xFF0C;&#x5BF9;&#x8C61;&#x7528;&#x6237;&#x53EF;&#x4EE5;&#x4E0E;IEnumerator&#x7C7B;&#x578B;&#x4EA4;&#x4E92;&#xFF1A;</span></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">MyCarIEnumerator</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    {</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="keyword">string</span>[] args</span>)</span><br><span class="line">        </span>{</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;*********Fun with IEnumberable/IEnumerator************\n&quot;</span>);</span><br><span class="line">            Garage carLot = <span class="keyword">new</span> Garage();</span><br><span class="line">            <span class="comment">//&#x4EA4;&#x51FA;&#x96C6;&#x5408;&#x4E2D;&#x7684;&#x6BCF;&#x4E00;Car&#x5BF9;&#x8C61;&#x5417;</span></span><br><span class="line">            <span class="keyword">foreach</span> (Car c <span class="keyword">in</span> carLot)  <span class="comment">//&#x4E4B;&#x6240;&#x4EE5;&#x904D;&#x5386;carLot&#xFF0C;&#x662F;&#x56E0;&#x4E3A;carLot.GetEnumerator()&#x8FD4;&#x56DE;&#x7684;&#x9879;&#x65F6;Car&#x7C7B;&#x578B;&#xFF0C;&#x8FD9;&#x4E2A;&#x5341;&#x5206;&#x91CD;&#x8981;</span></span><br><span class="line">            {</span><br><span class="line">                Console.WriteLine(<span class="string">&quot;{0} is going {1} MPH&quot;</span>, c.CarName, c.CurrentSpeed);</span><br><span class="line">            }</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;GetEnumerator&#x88AB;&#x5B9A;&#x4E49;&#x4E3A;&#x516C;&#x5F00;&#x7684;&#xFF0C;&#x5BF9;&#x8C61;&#x7528;&#x6237;&#x53EF;&#x4EE5;&#x4E0E;IEnumerator&#x7C7B;&#x578B;&#x4EA4;&#x4E92;&#xFF0C;&#x4E0B;&#x9762;&#x7684;&#x7ED3;&#x679C;&#x4E0E;&#x4E0A;&#x9762;&#x662F;&#x4E00;&#x81F4;&#x7684;&quot;</span>);</span><br><span class="line">            <span class="comment">//&#x624B;&#x52A8;&#x4E0E;IEnumerator&#x534F;&#x4F5C;</span></span><br><span class="line">            IEnumerator i = carLot.GetEnumerator();</span><br><span class="line">            <span class="keyword">while</span> (i.MoveNext())</span><br><span class="line">            {</span><br><span class="line">                Car myCar = (Car)i.Current;</span><br><span class="line">                Console.WriteLine(<span class="string">&quot;{0} is going {1} MPH&quot;</span>, myCar.CarName, myCar.CurrentSpeed);</span><br><span class="line">            }</span><br><span class="line">            Console.ReadLine();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p><strong>&#x81EA;&#x5DF1;&#x5B9E;&#x73B0;IEnumerator&#x63A5;&#x53E3;</strong><br><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">ForeachTestCase</span></span><br><span class="line">{</span><br><span class="line">      <span class="comment">//&#x7EE7;&#x627F;IEnumerable&#x63A5;&#x53E3;&#xFF0C;&#x5176;&#x5B9E;&#x4E5F;&#x53EF;&#x4EE5;&#x4E0D;&#x7EE7;&#x627F;&#x8FD9;&#x4E2A;&#x63A5;&#x53E3;&#xFF0C;&#x53EA;&#x8981;&#x7C7B;&#x91CC;&#x9762;&#x542B;&#x6709;&#x8FD4;&#x56DE;IEnumberator&#x5F15;&#x7528;&#x7684;GetEnumerator()&#x65B9;&#x6CD5;&#x5373;&#x53EF;</span></span><br><span class="line">    <span class="keyword">class</span> <span class="title">ForeachTest</span>:<span class="title">IEnumerable</span>     {</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">string</span>[] elements;  <span class="comment">//&#x88C5;&#x8F7D;&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x6570;&#x7EC4;</span></span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">int</span> ctr = <span class="number">0</span>;  <span class="comment">//&#x6570;&#x7EC4;&#x7684;&#x4E0B;&#x6807;&#x8BA1;&#x6570;&#x5668;</span></span><br><span class="line">        <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;summary&gt;</span></span></span><br><span class="line">        <span class="comment"><span class="xmlDocTag">///</span> &#x521D;&#x59CB;&#x5316;&#x7684;&#x5B57;&#x7B26;&#x4E32;</span></span><br><span class="line">        <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;/summary&gt;</span></span></span><br><span class="line">        <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;param name=&quot;initialStrings&quot;&gt;</span><span class="xmlDocTag">&lt;/param&gt;</span></span></span><br><span class="line">        ForeachTest(<span class="keyword">params</span> <span class="keyword">string</span>[] initialStrings)</span><br><span class="line">        {</span><br><span class="line">            <span class="comment">//&#x4E3A;&#x5B57;&#x7B26;&#x4E32;&#x5206;&#x914D;&#x5185;&#x5B58;&#x7A7A;&#x95F4;</span></span><br><span class="line">            elements = <span class="keyword">new</span> String[<span class="number">8</span>];</span><br><span class="line">            <span class="comment">//&#x590D;&#x5236;&#x4F20;&#x9012;&#x7ED9;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x7684;&#x5B57;&#x7B26;&#x4E32;</span></span><br><span class="line">            <span class="keyword">foreach</span> (<span class="keyword">string</span> s <span class="keyword">in</span> initialStrings)</span><br><span class="line">            {</span><br><span class="line">                elements[ctr++] = s;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;summary&gt;</span></span></span><br><span class="line">        <span class="comment"><span class="xmlDocTag">///</span>  &#x6784;&#x9020;&#x51FD;&#x6570;</span></span><br><span class="line">        <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;/summary&gt;</span></span></span><br><span class="line">        <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;param name=&quot;source&quot;&gt;</span>&#x521D;&#x59CB;&#x5316;&#x7684;&#x5B57;&#x7B26;&#x4E32;<span class="xmlDocTag">&lt;/param&gt;</span></span></span><br><span class="line">        <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;param name=&quot;delimiters&quot;&gt;</span>&#x5206;&#x9694;&#x7B26;&#xFF0C;&#x53EF;&#x4EE5;&#x662F;&#x4E00;&#x4E2A;&#x6216;&#x591A;&#x4E2A;&#x5B57;&#x7B26;&#x5206;&#x9694;<span class="xmlDocTag">&lt;/param&gt;</span></span></span><br><span class="line">        ForeachTest(<span class="keyword">string</span> initialStrings, <span class="keyword">char</span>[] delimiters)</span><br><span class="line">        {</span><br><span class="line">            elements = initialStrings.Split(delimiters);</span><br><span class="line">        }</span><br><span class="line">        <span class="comment">//&#x5B9E;&#x73B0;&#x63A5;&#x53E3;&#x4E2D;&#x5F97;&#x65B9;&#x6CD5;</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> IEnumerator <span class="title">GetEnumerator</span>(<span class="params"></span>)</span><br><span class="line">        </span>{</span><br><span class="line">            <span class="keyword">return</span>  <span class="keyword">new</span> ForeachTestEnumerator(<span class="keyword">this</span>);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">class</span> <span class="title">ForeachTestEnumerator</span> : <span class="title">IEnumerator</span></span><br><span class="line">        {</span><br><span class="line">            <span class="keyword">private</span> <span class="keyword">int</span> position = -<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">private</span> ForeachTest t;</span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="title">ForeachTestEnumerator</span>(<span class="params">ForeachTest t</span>)</span><br><span class="line">            </span>{</span><br><span class="line">                <span class="keyword">this</span>.t = t;</span><br><span class="line">            }</span><br><span class="line">            <span class="preprocessor">#<span class="keyword">region</span> &#x5B9E;&#x73B0;&#x63A5;&#x53E3;</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">object</span> Current</span><br><span class="line">            {</span><br><span class="line">                <span class="keyword">get</span></span><br><span class="line">                {</span><br><span class="line">                    <span class="keyword">return</span> t.elements[position];</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">bool</span> <span class="title">MoveNext</span>(<span class="params"></span>)</span><br><span class="line">            </span>{</span><br><span class="line">                <span class="keyword">if</span> (position &lt; t.elements.Length - <span class="number">1</span>)</span><br><span class="line">                {</span><br><span class="line">                    position++;</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">                }</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                {</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Reset</span>(<span class="params"></span>)</span><br><span class="line">            </span>{</span><br><span class="line">                position = -<span class="number">1</span>;</span><br><span class="line">            }</span><br><span class="line">            <span class="preprocessor">#<span class="keyword">endregion</span></span></span><br><span class="line">        }</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="keyword">string</span>[] args</span>)</span><br><span class="line">        </span>{</span><br><span class="line">            <span class="comment">// ForeachTest f = new ForeachTest(&quot;This is a sample sentence.&quot;, new char[] { &apos; &apos;, &apos;-&apos; });</span></span><br><span class="line">            ForeachTest f = <span class="keyword">new</span> ForeachTest(<span class="string">&quot;This&quot;</span>, <span class="string">&quot;is&quot;</span>, <span class="string">&quot;a&quot;</span>, <span class="string">&quot;sample&quot;</span>, <span class="string">&quot;sentence.&quot;</span>);</span><br><span class="line">            <span class="keyword">foreach</span> (<span class="keyword">string</span> item <span class="keyword">in</span> f)</span><br><span class="line">            {</span><br><span class="line">                System.Console.WriteLine(item);</span><br><span class="line">            }</span><br><span class="line">            Console.ReadKey();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p><strong>&#x901A;&#x8FC7;&#x4EE5;&#x4E0A;&#x4EE3;&#x7801;&#xFF0C;&#x6211;&#x4EEC;&#x77E5;&#x9053;:</strong></p>
<p>foreach &#x8FED;&#x4EE3;&#x96C6;&#x5408;&#x7684;&#x672C;&#x8D28;&#x8FD8;&#x662F;&#x901A;&#x8FC7;&#x7D22;&#x5F15;&#x7684;&#x65B9;&#x5F0F;&#x3002;&#x901A;&#x8FC7;IEnumerator&#x5305;&#x88C5;&#x4E86;&#x7D22;&#x5F15;&#x8BBF;&#x95EE;&#x4ECE;&#x800C;&#x5B9E;&#x73B0;&#x5BF9;&#x8C61;&#x8BBF;&#x95EE;&#x7684;&#x65B9;&#x5F0F;&#x3002;</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[for vs foreach]]></title>
      <url>http://bytes1001.github.io/2015/08/16/2015-08-16-for-foreach/</url>
      <content type="html"><![CDATA[<h5 id="&#x7FFB;&#x5899;&#x51FA;&#x53BB;&#xFF0C;&#x627E;&#x5230;&#x7684;&#x4E00;&#x7BC7;&#x6587;&#x7AE0;&#x3002;&#x6BD4;&#x8F83;&#x597D;&#xFF0C;&#x968F;&#x624B;&#x5C31;copy_&#x5206;&#x4EAB;&#x7ED9;&#x5927;&#x5BB6;&#x3002;&#x82F1;&#x6587;&#x4E0D;&#x597D;&#x7684;_&#x8BF7;&#x7565;&#x8FC7;&#x2026;">&#x7FFB;&#x5899;&#x51FA;&#x53BB;&#xFF0C;&#x627E;&#x5230;&#x7684;&#x4E00;&#x7BC7;&#x6587;&#x7AE0;&#x3002;&#x6BD4;&#x8F83;&#x597D;&#xFF0C;&#x968F;&#x624B;&#x5C31;copy &#x5206;&#x4EAB;&#x7ED9;&#x5927;&#x5BB6;&#x3002;&#x82F1;&#x6587;&#x4E0D;&#x597D;&#x7684;  &#x8BF7;&#x7565;&#x8FC7;&#x2026;</h5><p>For vs. Foreach. For and foreach differ slightly in performance. They are approximately the same speed. But the foreach loop uses more stack space for local variables. In this comparison, we strive to understand the exact difference in the two loops.</p>
<p>Comparison. First, let&#x2019;s look at the version of the loop that uses the for loop (Method1) and the version that uses the foreach-loop (Method2). Each method sums all the elements in an integer array.<br><strong>For loop version: Method1</strong><br><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">Method1</span>(<span class="params"><span class="keyword">int</span>[] array</span>)</span><br><span class="line"></span>{</span><br><span class="line">    <span class="keyword">int</span> a = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; array.Length; i++)</span><br><span class="line">    {</span><br><span class="line">	a += array[i];</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> a;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p><strong>Foreach loop version: Method2</strong><br><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">Method2</span>(<span class="params"><span class="keyword">int</span>[] array</span>)</span><br><span class="line"></span>{</span><br><span class="line">    <span class="keyword">int</span> a = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">foreach</span> (<span class="keyword">int</span> <span class="keyword">value</span> <span class="keyword">in</span> array)</span><br><span class="line">    {</span><br><span class="line">	a += <span class="keyword">value</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> a;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p>Difference. In .NET 4.0, we see a difference in the IL. The Method1 version uses enough stack space for only two local variables (a and i). The Method2 version uses stack space for four locals (a, value, and two compiler-generated temporaries).<br>IL<br>When a method is called in the Common Language Runtime, all of the memory required for the locals is allocated upon the stack. Because this takes place on the stack, this process is fast, but it is not free.<br>Thus:The foreach-loop will incur a small cost due to its extra two local variables.</p>
<p>Benchmark. Now, let&#x2019;s test these two methods against each other. When testing, try altering the order of the methods such that Method2 is tested before Method1. You will need to paste Method1 and Method2 into the Program class.<br>Note:The foreach version was slower than the for version. This is because the foreach-version uses more local variable space.<br><strong>C# program that benchmarks methods</strong><br><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> System.Diagnostics;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">{</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"></span>)</span><br><span class="line">    </span>{</span><br><span class="line">	<span class="keyword">int</span>[] array = <span class="keyword">new</span> <span class="keyword">int</span>[] { <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span> };</span><br><span class="line">	Method1(array);</span><br><span class="line">	Method2(array);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> s1 = Stopwatch.StartNew();</span><br><span class="line">	<span class="keyword">const</span> <span class="keyword">int</span> m = <span class="number">100000000</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++)</span><br><span class="line">	{</span><br><span class="line">	    Method1(array);</span><br><span class="line">	}</span><br><span class="line">	s1.Stop();</span><br><span class="line">	<span class="keyword">var</span> s2 = Stopwatch.StartNew();</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++)</span><br><span class="line">	{</span><br><span class="line">	    Method2(array);</span><br><span class="line">	}</span><br><span class="line">	s2.Stop();</span><br><span class="line">	Console.WriteLine(((<span class="keyword">double</span>)(s1.Elapsed.TotalMilliseconds *</span><br><span class="line">	    <span class="number">1000000</span>) / m).ToString(<span class="string">&quot;0.00 ns&quot;</span>));</span><br><span class="line">	Console.WriteLine(((<span class="keyword">double</span>)(s2.Elapsed.TotalMilliseconds *</span><br><span class="line">	    <span class="number">1000000</span>) / m).ToString(<span class="string">&quot;0.00 ns&quot;</span>));</span><br><span class="line">	Console.Read();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p><strong>Output</strong></p>
<p>7.37 ns<br>8.04 ns</p>
<p>Benchmark 2. The extra local variables in the foreach loop slow down the simple loop. However, it is possible to use those local variables to our advantage. Let&#x2019;s change the loops to have two statements that access the value.<br><strong>For loop alternate version: Method1</strong><br><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">Method1</span>(<span class="params"><span class="keyword">int</span>[] array</span>)</span><br><span class="line"></span>{</span><br><span class="line">    <span class="keyword">int</span> a = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; array.Length; i++)</span><br><span class="line">    {</span><br><span class="line">	a += array[i];</span><br><span class="line">	a += array[i];</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> a;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p><strong>Foreach loop alternate version: Method2</strong><br><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">Method2</span>(<span class="params"><span class="keyword">int</span>[] array</span>)</span><br><span class="line"></span>{</span><br><span class="line">    <span class="keyword">int</span> a = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">foreach</span> (<span class="keyword">int</span> <span class="keyword">value</span> <span class="keyword">in</span> array)</span><br><span class="line">    {</span><br><span class="line">	a += <span class="keyword">value</span>;</span><br><span class="line">	a += <span class="keyword">value</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> a;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p><strong>Results</strong></p>
<p>7.71 ns<br>7.69 ns</p>
<p>New results. Now, the for loop is slightly slower than the foreach loop. This is because the local variable that stores the value of the element in the array is faster to access than an element in the array.</p>
<p><strong>Summary.</strong> In micro-benchmarking, introducing extra local variables with foreach-loops can impact performance. However, if those local variables are reused several times in the loop body, they can lead to a performance improvement.<br>Thus:The for-loop is faster than the foreach-loop if the array must only be accessed once per iteration.</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Dispose模式]]></title>
      <url>http://bytes1001.github.io/2015/08/15/2015-08-15-dispose/</url>
      <content type="html"><![CDATA[<h4 id="&#x6211;&#x4EEC;&#x77E5;&#x9053;&#x5728;&#x6258;&#x7BA1;&#x4EE3;&#x7801;&#x91CC;&#x8C03;&#x7528;&#x975E;&#x6258;&#x7BA1;&#x8D44;&#x6E90;&#x65F6;&#xFF0C;&#x9700;&#x8981;&#x663E;&#x5F0F;&#x91CA;&#x653E;&#x975E;&#x6258;&#x7BA1;&#x8D44;&#x6E90;">&#x6211;&#x4EEC;&#x77E5;&#x9053;&#x5728;&#x6258;&#x7BA1;&#x4EE3;&#x7801;&#x91CC;&#x8C03;&#x7528;&#x975E;&#x6258;&#x7BA1;&#x8D44;&#x6E90;&#x65F6;&#xFF0C;&#x9700;&#x8981;&#x663E;&#x5F0F;&#x91CA;&#x653E;&#x975E;&#x6258;&#x7BA1;&#x8D44;&#x6E90;</h4><p>&#x6709;&#x4E24;&#x79CD;&#x65B9;&#x5F0F;&#xFF1A;</p>
<p><strong>1.&#x4E3B;&#x52A8;&#x91CA;&#x653E;</strong>&#xFF08;<em>&#x8C03;&#x7528;&#x8005;&#x8C03;&#x7528;dispose</em>&#xFF09;</p>
<p>&#x4F18;&#x70B9;&#xFF1A;&#x6548;&#x7387;&#x9AD8;&#xFF0C;&#x8D44;&#x6E90;&#x91CA;&#x653E;&#x5FEB;&#x3002;<br>&#x7F3A;&#x70B9;&#xFF1A;&#x8C03;&#x7528;&#x8005;&#x53EF;&#x80FD;&#x5FD8;&#x8BB0;&#x8C03;&#x7528;dispose&#x65B9;&#x6CD5;&#xFF0C;&#x9020;&#x6210;&#x8D44;&#x6E90;&#x6CA1;&#x6709;&#x91CA;&#x653E;</p>
<p><strong>2.&#x88AB;&#x52A8;&#x91CA;&#x653E;</strong>&#xFF08;<em>&#x6790;&#x6784;&#x51FD;&#x6570;&#x91CC;dispose</em>&#xFF09;</p>
<p>&#x4F18;&#x70B9;&#xFF1A;&#x5373;&#x4F7F;&#x8C03;&#x7528;&#x8005;&#x6CA1;&#x6709;&#x8C03;&#x7528;dispose&#x65B9;&#x6CD5;&#xFF0C;&#x8D44;&#x6E90;&#x4E5F;&#x4F1A;&#x5728;GC&#x7684;&#x65F6;&#x5019;dispose<br>&#x7F3A;&#x70B9;&#xFF1A;&#x6548;&#x7387;&#x4F4E;&#xFF0C;&#x4E0D;&#x77E5;&#x9053;GC&#x4EC0;&#x4E48;&#x65F6;&#x5019;&#x8FDB;&#x884C;&#xFF0C;&#x800C;&#x4E14;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x4E5F;&#x589E;&#x52A0;&#x4E86;GC&#x7684;&#x8D1F;&#x62C5;</p>
<p>&#x5FAE;&#x8F6F;&#x7684;.net&#x56E2;&#x961F;&#x7ED9;&#x51FA;&#x4E86;&#x8D44;&#x6E90;&#x91CA;&#x653E;&#x7684;Dispose&#x6A21;&#x5F0F;&#xFF0C;&#x517C;&#x987E;&#x4E86;&#x7C7B;&#x578B;&#x5B89;&#x5168;&#x6027;&#x4E0E;&#x6267;&#x884C;&#x6548;&#x7387;&#x3002;</p>
<p>&#x4E0B;&#x9762;&#x662F;&#x6211;&#x5199;&#x7684;dispose&#x6A21;&#x5F0F;&#x5177;&#x4F53;&#x4F8B;&#x5B50;&#xFF0C;</p>
<p>MyResourceWrapper&#x7C7B;&#x578B;&#x8C03;&#x7528;win api&#x5411;&#x5916;&#x90E8;&#x66B4;&#x9732;Graphics&#x3002;</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> System.Drawing;</span><br><span class="line"><span class="keyword">using</span> System.Linq;</span><br><span class="line"><span class="keyword">using</span> System.Text;</span><br><span class="line"><span class="keyword">namespace</span> <span class="title">GC</span></span><br><span class="line">{</span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> &#x8FD9;&#x4E2A;&#x7C7B;&#x5305;&#x88C5;&#x4E86;&#x975E;&#x6258;&#x7BA1;&#x8D44;&#x6E90;&#x3002;</span></span><br><span class="line">    <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;/summary&gt;</span></span></span><br><span class="line">  <span class="keyword">public</span>  <span class="keyword">class</span> <span class="title">MyResourceWrapper</span>:<span class="title">IDisposable</span></span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">private</span> IntPtr handle;<span class="comment">//&#x53E5;&#x67C4;,&#x975E;&#x6258;&#x7BA1;&#x8D44;&#x6E90;</span></span><br><span class="line">        <span class="keyword">public</span> Graphics Graphics</span><br><span class="line">        {</span><br><span class="line">            <span class="keyword">get</span></span><br><span class="line">            {</span><br><span class="line">                <span class="keyword">return</span> Graphics.FromHdc(handle);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">bool</span> disposed = <span class="keyword">false</span>;</span><br><span class="line"> </span><br><span class="line">        MyResourceWrapper()</span><br><span class="line">        {</span><br><span class="line">            handle = GetDC(IntPtr.Zero);</span><br><span class="line">        }</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Dispose</span>(<span class="params"></span>)</span><br><span class="line">        </span>{</span><br><span class="line">            CleanUp(<span class="keyword">true</span>);<span class="comment">//&#x91CA;&#x653E;&#x8D44;&#x6E90;</span></span><br><span class="line">            System.GC.SuppressFinalize(<span class="keyword">this</span>);</span><br><span class="line">        }</span><br><span class="line">        <span class="comment">//&#x6790;&#x6784;&#x65B9;&#x6CD5;&#x5E94;&#x8BE5;&#x53EA;&#x91CA;&#x653E;&#x975E;&#x6258;&#x7BA1;&#x8D44;&#x6E90;&#x3002;&#x4E0D;&#x8981;&#x91CA;&#x653E;&#x6258;&#x7BA1;&#x8D44;&#x6E90;&#x3002;</span></span><br><span class="line">        <span class="comment">//&#x56E0;&#x4E3A;GC&#x56DE;&#x6536;&#x65F6;&#xFF0C;&#x6709;&#x53EF;&#x80FD;&#x6258;&#x7BA1;&#x7C7B;&#x578B;&#x5DF2;&#x7ECF;&#x88AB;&#x91CA;&#x653E;&#x6389;&#x3002;&#x4F1A;&#x5BFC;&#x81F4;&#x629B;&#x5F02;&#x5E38;&#x3002;</span></span><br><span class="line">        <span class="comment">//&#x5B9A;&#x4E49;&#x6790;&#x6784;&#x51FD;&#x6570;&#x4F1A;&#x5BFC;&#x81F4;&#x81F3;&#x5C11;&#x4E24;&#x6B21;&#x5783;&#x573E;&#x56DE;&#x6536;&#xFF0C;&#x6548;&#x80FD;&#x4F4E;&#x4E0B;&#x3002;</span></span><br><span class="line">        ~MyResourceWrapper()</span><br><span class="line">        {</span><br><span class="line">            CleanUp(<span class="keyword">false</span>);</span><br><span class="line">        }</span><br><span class="line">      <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;summary&gt;</span></span></span><br><span class="line">      <span class="comment"><span class="xmlDocTag">///</span></span></span><br><span class="line">      <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;/summary&gt;</span></span></span><br><span class="line">      <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;param name=&quot;flag&quot;&gt;</span>&#x6807;&#x8BC6;&#x6E05;&#x7406;&#x6258;&#x7BA1;&#x8D44;&#x6E90;&#x8FD8;&#x662F;&#x975E;&#x6258;&#x7BA1;&#x8D44;&#x6E90;<span class="xmlDocTag">&lt;/param&gt;</span></span></span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">CleanUp</span>(<span class="params"><span class="keyword">bool</span> flag</span>)</span><br><span class="line">        </span>{</span><br><span class="line">            <span class="keyword">if</span> (!<span class="keyword">this</span>.disposed)</span><br><span class="line">            {</span><br><span class="line">                <span class="keyword">if</span> (flag)</span><br><span class="line">                {</span><br><span class="line">                    <span class="comment">//&#x91CA;&#x653E;&#x6258;&#x7BA1;&#x8D44;&#x6E90;</span></span><br><span class="line">                    Console.WriteLine(<span class="string">&quot;&#x6210;&#x529F;&#x91CA;&#x653E;&#x975E;&#x6258;&#x7BA1;&#x8D44;&#x6E90;&#xFF01;&quot;</span>);</span><br><span class="line">                }</span><br><span class="line">                <span class="comment">//&#x91CA;&#x653E;&#x975E;&#x6258;&#x7BA1;&#x8D44;&#x6E90;</span></span><br><span class="line">                ReleaseDC(IntPtr.Zero,handle);</span><br><span class="line">                Console.WriteLine(<span class="string">&quot;&#x6210;&#x529F;&#x91CA;&#x653E;&#x6258;&#x7BA1;&#x8D44;&#x6E90;&#xFF01;&quot;</span>);</span><br><span class="line">            }</span><br><span class="line">            disposed = <span class="keyword">true</span>;<span class="comment">//&#x5DF2;&#x7ECF;&#x6E05;&#x7406;</span></span><br><span class="line">        }</span><br><span class="line">      <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;summary&gt;</span></span></span><br><span class="line">      <span class="comment"><span class="xmlDocTag">///</span> &#x76EE;&#x7684;&#x5728;&#x4E8E;&#x8BF4;&#x660E;&#x8FD9;&#x4E2A;&#x7C7B;&#x7684;&#x9AD8;&#x6548;&#x7387;Dispose&#x6A21;&#x5F0F;&#x3002;</span></span><br><span class="line">      <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;/summary&gt;</span></span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Test</span>(<span class="params"></span>) </span>{</span><br><span class="line">            <span class="keyword">using</span> (<span class="keyword">var</span> re=<span class="keyword">new</span> MyResourceWrapper())</span><br><span class="line">            {</span><br><span class="line">                re.Graphics.DrawEllipse(<span class="keyword">new</span> Pen(Color.Red),<span class="number">100</span>,<span class="number">100</span>,<span class="number">300</span>,<span class="number">300</span>);</span><br><span class="line">            }</span><br><span class="line">         </span><br><span class="line">        }</span><br><span class="line">      <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;summary&gt;</span></span></span><br><span class="line">      <span class="comment"><span class="xmlDocTag">///</span> &#x76EE;&#x7684;&#x5728;&#x4E8E;&#x8BF4;&#x660E;&#x5F00;&#x53D1;&#x8005;&#x5FD8;&#x8BB0;&#x53BB;&#x8C03;&#x7528;dispose&#x65B9;&#x6CD5;&#x91CA;&#x653E;&#x8D44;&#x6E90;&#x4E86;&#x3002;</span></span><br><span class="line">      <span class="comment"><span class="xmlDocTag">///</span> <span class="xmlDocTag">&lt;/summary&gt;</span></span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">TestFinalize</span>(<span class="params"></span>)</span><br><span class="line">        </span>{</span><br><span class="line">            <span class="keyword">var</span> re = <span class="keyword">new</span> MyResourceWrapper();</span><br><span class="line">            re.Graphics.DrawEllipse(<span class="keyword">new</span> Pen(Color.Red), <span class="number">100</span>, <span class="number">100</span>, <span class="number">300</span>, <span class="number">300</span>);</span><br><span class="line">            re = <span class="keyword">null</span>;</span><br><span class="line">            System.GC.Collect();</span><br><span class="line">            System.GC.WaitForPendingFinalizers();</span><br><span class="line">        }</span><br><span class="line">        [System.Runtime.InteropServices.DllImport(<span class="string">&quot;User32.dll&quot;</span>)]</span><br><span class="line">         <span class="function"><span class="keyword">static</span> <span class="keyword">extern</span> IntPtr <span class="title">GetDC</span>(<span class="params">IntPtr Hwnd</span>)</span>;</span><br><span class="line"> </span><br><span class="line">        [System.Runtime.InteropServices.DllImport(<span class="string">&quot;User32.dll&quot;</span>)]</span><br><span class="line">         <span class="function"><span class="keyword">static</span>  <span class="keyword">extern</span> <span class="keyword">int</span> <span class="title">ReleaseDC</span>(<span class="params">IntPtr hWnd, IntPtr hDC</span>)</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[programer]]></title>
      <url>http://bytes1001.github.io/2015/08/14/2015-08-06-cat/</url>
      <content type="html"><![CDATA[<p>hi.</p>
<p><img src="http://bytes.oss-cn-hangzhou.aliyuncs.com/blog%2Fmonkey.jpg" alt="cat"></p>
]]></content>
    </entry>
    
  
  
</search>
